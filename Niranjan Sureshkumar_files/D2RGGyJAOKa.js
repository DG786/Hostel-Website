if (self.CavalryLogger) { CavalryLogger.start_js(["lKcU7"]); }

__d('FriendsCenterStickyController',['StickyController'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('StickyController'));i=h&&h.prototype;function j(k,l,m,n){'use strict';i.constructor.call(this,k,l,m,n);this.$FriendsCenterStickyController1=l;this.$FriendsCenterStickyController2=n||k.parentNode;var o=k.getBoundingClientRect();this.$FriendsCenterStickyController3=o.bottom-o.top;this.$FriendsCenterStickyController4=true;}j.prototype.unstick=function(){'use strict';this.$FriendsCenterStickyController4=false;this.handleScroll();};j.prototype.restick=function(){'use strict';this.$FriendsCenterStickyController4=true;this.handleScroll();};j.prototype.shouldFix=function(){'use strict';if(!this.$FriendsCenterStickyController4)return false;var k=this.$FriendsCenterStickyController2.getBoundingClientRect();return this.$FriendsCenterStickyController1>=k.top&&this.$FriendsCenterStickyController1+this.$FriendsCenterStickyController3<k.bottom;};f.exports=j;},null);
__d('FriendsCenterStickyHeader',['cx','BlueBar','CSS','DOM','FriendsCenterStickyController','Style','Vector'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=[];function j(k){'use strict';var l=c('BlueBar').getBar();if(!l)return;var m=c('Style').isFixed(l)?c('Vector').getElementDimensions(l).y:0,n=this.getPlaceholder(k.getBoundingClientRect());c('DOM').insertAfter(k,n);c('CSS').addClass(k,"_5m65");var o=new (c('FriendsCenterStickyController'))(k,m,function(p){c('CSS').conditionShow(n,p);c('CSS').conditionClass(k,'stuck',p);}.bind(this));o.start();i[k.id]=o;}j.prototype.getPlaceholder=function(k){'use strict';var l=c('DOM').create('div');c('CSS').hide(l);c('Style').set(l,'height',k.bottom-k.top+'px');c('Style').set(l,'width',k.right-k.left+'px');return l;};j.stopSticky=function(k){'use strict';k&&k.id in i&&i[k.id].unstick();};j.startSticky=function(k){'use strict';k&&k.id in i&&i[k.id].restick();};f.exports=j;},null);
__d('FriendBrowserCheckboxController',['csx','Arbiter','AsyncRequest','CSS','DOM','Event','Form','FriendsCenterStickyHeader','OnVisible','$','bind','ge'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i='friend_browser_list';function j(){}Object.assign(j,{instances:{},getInstance:function(k){return this.instances[k];}});Object.assign(j.prototype,{init:function(k,l,m,n){j.instances[k]=this;this._id=k;this._simplified=m;this._infiniteScroll=n;this._form=l;this._contentGrid=c('DOM').find(l,'.friendBrowserCheckboxContentGrid');this._loadingIndicator=c('DOM').find(l,'.friendBrowsingCheckboxContentLoadingIndicator');this._checkboxResults=c('DOM').find(l,'.friendBrowserCheckboxResults');this._contentPager=c('DOM').find(l,'.friendBrowserCheckboxContentPager');this._standaloneFilters=null;this._searchStarted=false;this._stickyHeader=null;c('Arbiter').subscribe('friend-browser/name-change',this.getNew.bind(this,false));this.numGetNewRequests=0;this.queuedRequests={};c('Event').listen(this._form,'submit',this.onFormSubmit.bind(this));},addTypeahead:function(k,l){k.subscribe('select',this.onHubSelect.bind(this,k,l));if(this._simplified)k.subscribe('unselect',this.onHubSelect.bind(this,k,l));},setStandaloneFilters:function(k){if(k){this._standaloneFilters=c('DOM').scry(document.body,'.friendBrowserCheckboxFilters')[0];this._stickyHeader=c('DOM').scry(c('$')('fbSearchResultsBox'),"._5m65")[0];var l=c('$')('doneSearchButton');l.onclick=function(){this._searchStarted=false;c('DOM').scry(document.body,"._5n-u").forEach(function(m){c('CSS').show(m);});c('CSS').hide(l);window.scrollTo(0,0);c('FriendsCenterStickyHeader').startSticky(this._stickyHeader);}.bind(this);}return this;},onFormSubmit:function(){this.getNew(true);return false;},addSelector:function(k){k.subscribe('change',this.getNew.bind(this,false));},onHubSelect:function(k,l,event,m){if(this._simplified){this.getNew(true);return;}if(!(event=='select'&&m.selected))return;var n=this.buildNewCheckbox(l,m.selected.text,m.selected.uid),o=c('DOM').find(this._standaloneFilters||this._form,'.checkboxes_'+l);c('DOM').appendContent(o.firstChild,n);var p=c('DOM').scry(k.getElement(),'input[type="button"]');if(p&&p[0])p[0].click();this.getNew(true);},buildNewCheckbox:function(k,l,m){var n=k+'_ids_'+m,o=k+'_ids[]',p=c('DOM').create('input',{id:n,type:'checkbox',value:m,name:o,checked:true});c('Event').listen(p,'click',c('bind')(this,'getNew',false));var q=c('DOM').create('td',null,p);c('CSS').addClass(q,'vTop');c('CSS').addClass(q,'hLeft');var r=c('DOM').create('label',null,l),s=c('DOM').create('td',null,r);c('CSS').addClass(s,'vMid');c('CSS').addClass(s,'hLeft');var t=c('DOM').create('tr');t.appendChild(q);t.appendChild(s);return t;},showMore:function(){var k=c('DOM').scry(this._contentPager,'.friendBrowserMorePager')[0];if(!k)return false;if(c('CSS').hasClass(k,'async_saving'))return false;var l=this.numGetNewRequests,m=this.getFormData();m.show_more=true;if(this._searchStarted)m.page=i;new (c('AsyncRequest'))().setURI('/ajax/growth/friend_browser/checkbox.php').setData(m).setHandler(c('bind')(this,function(n){this.showMoreHandler(n,l);})).setStatusElement(k).send();},showMoreHandler:function(k,l){if(l==this.numGetNewRequests){var m=k.payload;c('DOM').appendContent(this._contentGrid,m.results);this.updatePagerAndExtraData(m.pager,m.extra_data);}},getFormData:function(){var k=c('Form').serialize(this._form);if(this._standaloneFilters){var l=c('Form').serialize(this._standaloneFilters);for(var m in l)k[m]=l[m];}return k;},getNew:function(k){this.numGetNewRequests++;var l=this.numGetNewRequests;c('CSS').addClass(this._checkboxResults,'friendBrowserCheckboxContentOnload');if(c('ge')('friendBrowserCI'))c('CSS').addClass(c('$')('friendBrowserCI'),'friendBrowserCheckboxContentOnload');this.startStandaloneSearch();c('CSS').show(this._loadingIndicator);var m=this.getFormData();m.used_typeahead=k;if(this._searchStarted)m.page=i;new (c('AsyncRequest'))().setURI('/ajax/growth/friend_browser/checkbox.php').setData(m).setHandler(c('bind')(this,function(n){this.getNewHandler(n,l);})).send();},getNewHandler:function(k,l){if(l==this.numGetNewRequests){var m=k.payload;c('DOM').setContent(this._contentGrid,m.results);c('CSS').removeClass(this._checkboxResults,'friendBrowserCheckboxContentOnload');if(c('ge')('friendBrowserCI'))c('CSS').hide(c('$')('friendBrowserCI'));c('CSS').hide(this._loadingIndicator);this.updatePagerAndExtraData(m.pager,m.extra_data);}},startStandaloneSearch:function(){if(!this._standaloneFilters)return;window.scrollTo(0,0);if(this._searchStarted)return;this._searchStarted=true;c('CSS').show(c('$')('fbSearchResultsBox'));c('DOM').scry(document.body,"._5n-u").forEach(function(k){c('CSS').hide(k);});c('CSS').show(c('$')('doneSearchButton'));c('FriendsCenterStickyHeader').stopSticky(this._stickyHeader);},updatePagerAndExtraData:function(k,l){c('DOM').setContent(this._contentPager,k);if(this._infiniteScroll)this.setupOnVisible();c('DOM').replace(this._form.elements.extra_data,l);},setupOnVisible:function(){var k=c('DOM').scry(this._contentPager,'.friendBrowserMorePager')[0];if(k&&this._id!='jewel'){this._onVisible&&this._onVisible.remove();this._onVisible=new (c('OnVisible'))(k,c('bind')(this,'showMore'),false,1000);}}});f.exports=j;},null);
__d('legacy:friend-browser-checkbox-js',['FriendBrowserCheckboxController'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();b.FriendBrowserCheckboxController=c('FriendBrowserCheckboxController');},3);
__d('legacy:onvisible',['OnVisible'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();b.OnVisible=c('OnVisible');},3);
__d('HubsTypeaheadView',['fbt','Arbiter','AsyncRequest','ContextualTypeaheadView','CSS','DOM','Event','$'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('ContextualTypeaheadView'));j=i&&i.prototype;function k(l,m){'use strict';j.constructor.call(this,l,m);if(m.allowDedupe)this.subscribe('select',this.selectDuplicates.bind(this));}k.prototype.hide=function(){'use strict';return this.canHide?j.hide.call(this):null;};k.prototype.reset=function(){'use strict';return this.canHide?j.reset.call(this):null;};k.prototype._createFreeFormNode=function(l){'use strict';var m=l;if(this.showCreatePrompt){m=h._("Add \"{partial_name}\"",[h.param('partial_name',l)]);}else if(this.showAltCreatePrompt)m=h._("Create \"{partial_name}\"",[h.param('partial_name',l)]);return {text:m,orig_text:l,type:'addnew calltoaction',uid:'0'};};k.prototype.validateQuery=function(l){'use strict';return this.minQueryLength?l.length>=this.minQueryLength:true;};k.prototype.render=function(l,m,n){'use strict';var o=[],p=Math.max(1,Math.floor(m.length/10));for(var q=p;q<m.length;q++)if(!!m[q].already_added){o.push(m[q]);m.splice(q,1);q--;}m=m.concat(o);if(this.alwaysRender&&l!=='')if(this.allowFreeformEntry){if(this.validateQuery(l))m.push(this._createFreeFormNode(l));}else{var r=l.toLowerCase().trim(),s=false;for(var t=0;t<m.length;t++)if(r==m[t].text.toLowerCase().trim()){s=true;break;}if(!s&&this.validateQuery(l))m.push(this._createFreeFormNode(l));}var u=m.length;for(var v=0;v<m.length;v++)if(m[v].uid==false)u--;if(this.allowDedupe&&u>1&&l.length>=3)m.push({text:h._("Mark Duplicate Results"),type:'dupelink calltoaction'});return j.render.call(this,l,m,n);};k.prototype.selectDuplicates=function(l,m){'use strict';if(!m.selected.type.match('dupelink'))return;var n=[];for(var o=0;o<this.results.length;o++){if(this.results[o].uid==false)continue;n.push(this.results[o].uid);}var p=c('Arbiter').subscribe('typeahead/'+this.collectionID+'/confirmDupes',function(q,r){var s=this.results.map(function(v){return v.uid;});for(var t=0;t<r.dupe_ids.length;t++){var u=s.indexOf(r.dupe_ids[t]);c('CSS').hide(this.items[u]);}this.hasHiddenDupes=r.dupe_ids.length>0;}.bind(this));c('Arbiter').subscribe('typeahead/'+this.collectionID+'/finishDupes',function(q,r){c('Arbiter').unsubscribe(p);this.canHide=true;this.hasHiddenDupes&&c('CSS').hide(c('DOM').find(this.content,'.dupelink'));this.hasHiddenDupes=false;}.bind(this));this.canHide=false;new (c('AsyncRequest'))('/ajax/typeahead/quality/duplicates').setData({ids:n,surface:c('$')('collections_surface').value,collection_id:this.collectionID}).send();};k.initFreeformBoxes=function(){'use strict';var l=c('DOM').scry(document,'div.fbAddFormDialog')[0];if(!l)return;var m=c('DOM').find(l,'form');c('Event').listen(m,'submit',function(){c('DOM').scry(m,'div.fbFreeformInput').forEach(function(n){if(c('DOM').find(n,'input.inputtext').value)c('CSS').addClass(n.firstChild,'selected');});});};Object.assign(k.prototype,{canHide:true,hasHiddenDupes:false});f.exports=k;},null);
__d('ClearableTypeahead',['Event'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={resetOnCloseButtonClick:function(i,j){c('Event').listen(j,'click',function(){var k=i.getCore();k.getElement().focus();k.reset();});}};f.exports=h;},null);
__d('TypeaheadSetPhotoOnSelect',['CSS','DOM','Event'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this._typeahead=i;}h.prototype.enable=function(){'use strict';var i=c('DOM').scry(this._typeahead.getElement(),'.photo')[0];if(i){if(!c('DOM').isNodeOfType(i,'img')){var j=c('DOM').create('img',{className:i.className});c('DOM').replace(i,j);i=j;}var k=c('CSS').hide.bind(null,i),l=c('CSS').show.bind(null,i);this._eventListener=c('Event').listen(i,{load:l,error:k,abort:k});this._subscription=this._typeahead.subscribe('select',function(m,n){var o=n.selected.photo||this._typeahead.view.fallbackPhoto;o?i.setAttribute('src',o):k();}.bind(this));}};h.prototype.disable=function(){'use strict';this._eventListener.remove();this._eventListener=null;this._typeahead.unsubscribe(this._subscription);this._subscription=null;};Object.assign(h.prototype,{_eventListener:null,_subscription:null});f.exports=h;},null);
__d('legacy:SetPhotoOnSelectTypeaheadBehavior',['TypeaheadSetPhotoOnSelect'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();if(!b.TypeaheadBehaviors)b.TypeaheadBehaviors={};b.TypeaheadBehaviors.setPhotoOnSelect=function(h){h.enableBehavior(c('TypeaheadSetPhotoOnSelect'));};},3);