if (self.CavalryLogger) { CavalryLogger.start_js(["P7U6r"]); }

__d("CommercialBreakMobileEvent",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={SUBSCRIPTION_SUCCESS:"commercial_break_skywalker_subscription_success",SUBSCRIPTION_FAILURE:"commercial_break_skywalker_subscription_failure",RECEIVE_INTENT_MSG:"commercial_break_skywalker_receive_intent",RECEIVE_START_MSG:"commercial_break_skywalker_receive_start",RECEIVE_INVALID_MSG:"commercial_break_skywalker_receive_invalid_message",VIDEO_FETCH_SUCCESS:"commercial_break_video_fetch_success",VIDEO_FETCH_FAILURE:"commercial_break_video_fetch_failure",COMMERCIAL_BREAK_INLINE_TO_FULLSCREEN:"commercial_break_inline_to_fullscreen",COMMERCIAL_BREAK_FULLSCREEN_TO_INLINE:"commercial_break_fullscreen_to_inline",COMMERCIAL_BREAK_SCROLLED_AWAY:"commercial_break_scrolled_away",COMMERCIAL_BREAK_SCROLLED_INTO:"commercial_break_scrolled_into",COMMERCIAL_BREAK_HIDE_AD:"commercial_break_hide_ad",COMMERCIAL_BREAK_START:"commercial_break_start",COMMERCIAL_BREAK_START_AD:"commercial_break_start_ad",COMMERCIAL_BREAK_TRANSIT:"commercial_break_transit",COMMERCIAL_BREAK_WAIT_FOR:"commercial_break_wait_for",COMMERCIAL_BREAK_STATIC_COUNTDOWN:"commercial_break_static_countdown",COMMERCIAL_BREAK_END:"commercial_break_end",COMMERCIAL_BREAK_PAUSE_AD:"commercial_break_pause_ad",COMMERCIAL_BREAK_PLAY_AD:"commercial_break_play_ad",COMMERCIAL_BREAK_NO_AD_TRANSITION:"commercial_break_no_ad_transition",COMMERCIAL_BREAK_ELIGIBLE_VOD_START:"commercial_break_eligible_vod_start"};},null);
__d("CommercialBreakNoAdReason",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={NO_VIDEO_AD:"no_video_ad",TIME_SPENT_INSUFFICIENT:"time_spent_insufficient",PLAYBACK_ERROR:"playback_error",HIDE_AD:"hide_ad",WAIT_FOR_FAILED:"wait_for_failed",SPONSORED_STORY:"sponsored_story"};},null);
__d("CommercialBreakState",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={INIT:"INIT",PREPARE:"PREPARE",AD_REQUEST_SENT:"AD_REQUEST_SENT",CB_SCHEDULED:"CB_SCHEDULED",ENTERING_TRANSITION:"ENTERING_TRANSITION",PLAY_AD_COUNTDOWN:"PLAY_AD_COUNTDOWN",LEAVING_TRANSITION:"LEAVING_TRANSITION",VOD_BREAK_WITH_NO_VIDEO_AD:"VOD_BREAK_WITH_NO_VIDEO_AD"};},null);
__d("InstreamVideoAdType",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={LIVE:"live",VOD:"vod",NONLIVE:"nonlive",LIVE_POST_ROLL:"live_post_roll",VOD_POST_ROLL:"vod_post_roll",NONLIVE_POST_ROLL:"nonlive_post_roll"};},null);
__d("VideoBroadcastSubscriptionAction",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={SUBSCRIBE:"subscribe",UNSUBSCRIBE:"unsubscribe"};},null);
__d("FeedbackAddStreamingReactionWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"829607030507754",queryID:"829607037174420"});},null);
__d('FeedbackAddStreamingReactionSubscription',['FeedbackAddStreamingReactionWebGraphQLSubscription','BaseGraphQLSubscription','uuid'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function(i){return 'gqls/feedback_add_streaming_reaction_subscribe/feedback_id_'+i;},_getQueryID:function(){return c('FeedbackAddStreamingReactionWebGraphQLSubscription').getQueryID();},_getQueryParameters:function(i){return {input:JSON.stringify({client_subscription_id:c('uuid')(),feedback_id:i})};},_getSubscriptionCallName:function(){return 'feedback_add_streaming_reaction_subscribe';}});f.exports=h;},null);
__d('KeyframeAnimation',['invariant','CSS','Map','ReactTransitionEvents','UserAgent','nullthrows','queryThenMutateDOM','uniqueID'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i='KeyframeAnimation-',j='animation-';function k(l){'use strict';this.$KeyframeAnimation3=l;this.$KeyframeAnimation8=true;this.$KeyframeAnimation5=new (c('Map'))();this.$KeyframeAnimation5.set('animation-name',i+c('uniqueID')());this.$KeyframeAnimation4=new (c('Map'))();if(!k.$KeyframeAnimation1){var m=document.createElement('style');document.head.appendChild(m);var n=c('nullthrows')(m.sheet);!(n instanceof CSSStyleSheet)?h(0):void 0;k.$KeyframeAnimation1=n;k.$KeyframeAnimation2=new (c('Map'))();}this.$KeyframeAnimation9=c('UserAgent').isEngine('WebKit')?'-webkit-':'';}k.prototype.defineKeyframes=function(l){'use strict';for(var m=Object.entries(l),n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var p;if(n){if(o>=m.length)break;p=m[o++];}else{o=m.next();if(o.done)break;p=o.value;}var q=p,r=q[0],s=q[1];r=parseFloat(r,10);!(r>=0&&r<=100)?h(0):void 0;var t='';for(var u=Object.entries(s).sort(),v=Array.isArray(u),w=0,u=v?u:u[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var x;if(v){if(w>=u.length)break;x=u[w++];}else{w=u.next();if(w.done)break;x=w.value;}var y=x,z=y[0],aa=y[1];t+=z+': '+aa+';';}this.$KeyframeAnimation4.set(r,t);}return this;};k.prototype.defineKeyframe=function(l,m){'use strict';l=parseFloat(l,10);!(l>=0&&l<=100)?h(0):void 0;var n='';for(var o=Object.entries(m).sort(),p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var r;if(p){if(q>=o.length)break;r=o[q++];}else{q=o.next();if(q.done)break;r=q.value;}var s=r,t=s[0],u=s[1];if(t.substring(0,j.length)===j||t==='transform')t=this.$KeyframeAnimation9+t;n+=t+': '+u+';';}this.$KeyframeAnimation4.set(l,n);return this;};k.prototype.setDuration=function(l){'use strict';this.$KeyframeAnimation5.set('animation-duration',l+'s');return this;};k.prototype.setTimingFunction=function(l){'use strict';this.$KeyframeAnimation5.set('animation-timing-function',l);return this;};k.prototype.setIterationCount=function(l){'use strict';this.$KeyframeAnimation5.set('animation-iteration-count',l+'');return this;};k.prototype.setFillMode=function(l){'use strict';this.$KeyframeAnimation5.set('animation-fill-mode',l);return this;};k.prototype.setAnimationDelay=function(l){'use strict';this.$KeyframeAnimation5.set('animation-delay',l+'s');return this;};k.prototype.setFinishedCallback=function(l){'use strict';this.$KeyframeAnimation6=l;return this;};k.prototype.setMemoize=function(l){'use strict';this.$KeyframeAnimation8=l;return this;};k.prototype.start=function(){'use strict';!this.$KeyframeAnimation5.has('animation-duration')?h(0):void 0;if(this.$KeyframeAnimation7){this.restartAnimation();return;}var l=this.$KeyframeAnimation3,m=this.$KeyframeAnimation10(),n=this.$KeyframeAnimation11(m),o=void 0;if(this.$KeyframeAnimation8&&k.$KeyframeAnimation2.has(n)){var p=c('nullthrows')(k.$KeyframeAnimation2.get(n));this.$KeyframeAnimation5.set('animation-name',p);o=p;}else{k.$KeyframeAnimation1.insertRule(m,k.$KeyframeAnimation1.cssRules.length);o=c('nullthrows')(this.$KeyframeAnimation5.get('animation-name'));if(this.$KeyframeAnimation8)k.$KeyframeAnimation2.set(this.$KeyframeAnimation11(m),o);}var q=this.$KeyframeAnimation12(o);k.$KeyframeAnimation1.insertRule(q,k.$KeyframeAnimation1.cssRules.length);c('queryThenMutateDOM')(function(){},function(){this.$KeyframeAnimation13();c('CSS').addClass(l,o);}.bind(this));};k.prototype.restartAnimation=function(){'use strict';var l=this.$KeyframeAnimation3;c('CSS').removeClass(l,this.$KeyframeAnimation5.get('animation-name'));l.offsetWidth;this.$KeyframeAnimation7=false;c('CSS').addClass(l,this.$KeyframeAnimation5.get('animation-name'));};k.prototype.$KeyframeAnimation13=function(){'use strict';c('ReactTransitionEvents').addEndEventListener(this.$KeyframeAnimation3,this.$KeyframeAnimation14.bind(this));};k.prototype.$KeyframeAnimation12=function(l){'use strict';var m='';m+='.'+l+' {';for(var n=this.$KeyframeAnimation5,o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var q;if(o){if(p>=n.length)break;q=n[p++];}else{p=n.next();if(p.done)break;q=p.value;}var r=q,s=r[0],t=r[1];m+=s+': '+t+';';}m+='}';return m;};k.prototype.$KeyframeAnimation10=function(){'use strict';var l=this.$KeyframeAnimation5.get('animation-name'),m=void 0;if(c('UserAgent').isEngine('WebKit')){m='@-webkit-keyframes';}else m='@keyframes';var n=m+' '+l+' {';for(var o=this.$KeyframeAnimation4,p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var r;if(p){if(q>=o.length)break;r=o[q++];}else{q=o.next();if(q.done)break;r=q.value;}var s=r,t=s[0],u=s[1];n+=t+'% {'+u+'}';}return n+'}';};k.prototype.$KeyframeAnimation14=function(){'use strict';if(!this.$KeyframeAnimation7){if(this.$KeyframeAnimation6)this.$KeyframeAnimation6(this.$KeyframeAnimation3);this.$KeyframeAnimation7=true;}};k.prototype.$KeyframeAnimation11=function(l){'use strict';return l.substring(l.indexOf('{')+1).toLowerCase().split(' ').join('');};f.exports=k;},null);
__d('CSSAnimationBuilder',['KeyframeAnimation'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={keyframeAnimation:function(i){return new (c('KeyframeAnimation'))(i);}};f.exports=h;},null);
__d("XHotLiveVideoPayloadController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/cdn\/cacheable\/hot_live_video_payload\/{broadcast_id}\/",{broadcast_id:{type:"Int",required:true}});},null);
__d('HotLiveVideoPayloadManager',['Arbiter','AjaxRequest','XHotLiveVideoPayloadController'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={_subscribedPayloads:{},subscribe:function(i,j,k){var l=false;if(i in this._subscribedPayloads){var m=this._subscribedPayloads[i];++m.count;if('lastPayload' in m&&j in m.lastPayload)k(m.lastPayload[j]);}else{this._subscribedPayloads[i]={count:1,intervalHandle:window.setInterval(this._fetchPayload.bind(this,i),3000)};l=true;}var n=c('Arbiter').subscribe('HotLiveVideoPayloadManager/'+i+'/'+j,this._onCallback.bind(this,k));if(l)this._fetchPayload(i);return {arbiterToken:n,videoId:i,cancel:function(){h.unsubscribe(this);}};},unsubscribe:function(i){c('Arbiter').unsubscribe(i.arbiterToken);var j=this._subscribedPayloads[i.videoId];--j.count;if(j.count==0){if('intervalHandle' in j)window.clearInterval(j.intervalHandle);delete this._subscribedPayloads[i.videoId];}},_fetchPayload:function(i){var j=c('XHotLiveVideoPayloadController').getURIBuilder().setInt('broadcast_id',i).getURI(),k=new (c('AjaxRequest'))('GET',j);k.streamMode=false;k.onJSON=this._onPayload.bind(this,i);k.onError=this._onError.bind(this,i);k.send();},_onPayload:function(i,j){var k=this._subscribedPayloads[i];k.lastPayload=j.json;for(var l in j.json)c('Arbiter').inform('HotLiveVideoPayloadManager/'+i+'/'+l,j.json[l]);},_onError:function(i,j){if(j.status==404&&i in this._subscribedPayloads){var k=this._subscribedPayloads[i];if('intervalHandle' in k){window.clearInterval(k.intervalHandle);delete k.intervalHandle;}}},_onCallback:function(i,j,k){i(k);}};f.exports=h;},null);
__d('VideoRightButtonBase',['cx','csx','AsyncFormRequestUtils','CSS','DOM','Event','FormSubmit','LayerRefocusOnHide','Run','SubscriptionsHandler','throttle'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k,l,m,n,o,p,q,r){'use strict';this.$VideoRightButtonBase1=[];this.$VideoRightButtonBase2=l;this.$VideoRightButtonBase3=p;this.$VideoRightButtonBase4=o;this.$VideoRightButtonBase5=k;this.$VideoRightButtonBase6=q.hiddenAfterFinish;this.$VideoRightButtonBase7=q.hiddenWhilePaused;this.$VideoRightButtonBase8=q.allowHide;this.$VideoRightButtonBase9=new (c('SubscriptionsHandler'))();this.$VideoRightButtonBase10=false;this.$VideoRightButtonBase11=false;this.$VideoRightButtonBase12=false;this.$VideoRightButtonBase13=r;this.$VideoRightButtonBase14=false;if(this.$VideoRightButtonBase13){this.$VideoRightButtonBase13.disableBehavior(c('LayerRefocusOnHide'));var s=c('DOM').scry(this.$VideoRightButtonBase13.getContentRoot(),"._36gl")[0];if(s)c('Event').listen(s,'click',function(){this.$VideoRightButtonBase14=false;this.$VideoRightButtonBase13=null;this.nuxViewClicked();}.bind(this));this.$VideoRightButtonBase13.subscribe('hide',function(){if(this.$VideoRightButtonBase14)this.nuxViewHidden();this.$VideoRightButtonBase14=false;this.$VideoRightButtonBase13=null;}.bind(this));}}j.prototype.setupAllHandlers=function(){'use strict';this.$VideoRightButtonBase9=new (c('SubscriptionsHandler'))();var k=this.$VideoRightButtonBase5.getRootNode();c('Run').onLeave(function(){this.$VideoRightButtonBase9.release();}.bind(this));this.$VideoRightButtonBase9.addSubscriptions(c('Event').listen(k,'mousemove',c('throttle')(function(){return this.$VideoRightButtonBase15();}.bind(this),200)),c('Event').listen(k,'mouseenter',function(){if(this.$VideoRightButtonBase6&&this.$VideoRightButtonBase11||this.$VideoRightButtonBase7&&this.$VideoRightButtonBase12)return;this.$VideoRightButtonBase16=true;this.$VideoRightButtonBase15();if(this.$VideoRightButtonBase13){this.$VideoRightButtonBase13.show();this.$VideoRightButtonBase14=true;}}.bind(this)),c('Event').listen(k,'mouseleave',function(){this.$VideoRightButtonBase17();this.$VideoRightButtonBase16=false;}.bind(this)),this.$VideoRightButtonBase5.addListener('beginPlayback',function(){this.$VideoRightButtonBase11=false;this.$VideoRightButtonBase12=false;}.bind(this)),this.$VideoRightButtonBase5.addListener('finishPlayback',function(){this.$VideoRightButtonBase17();this.$VideoRightButtonBase11=true;}.bind(this)),this.$VideoRightButtonBase5.addListener('pausePlayback',function(){this.$VideoRightButtonBase17();this.$VideoRightButtonBase12=true;}.bind(this)));c('Event').listen(this.$VideoRightButtonBase2,'click',function(){if(this.$VideoRightButtonBase18)clearTimeout(this.$VideoRightButtonBase18);if(this.$VideoRightButtonBase1.length===0){this.$VideoRightButtonBase3.setAttribute('value',this.nextActionOnToggle(this.$VideoRightButtonBase10));c('FormSubmit').send(this.$VideoRightButtonBase4);}if(this.$VideoRightButtonBase10){this.toggleSwitchOffAnimation(this.$VideoRightButtonBase2);this.$VideoRightButtonBase1.push(false);this.$VideoRightButtonBase10=false;}else{this.toggleSwitchOnAnimation(this.$VideoRightButtonBase2);this.$VideoRightButtonBase1.push(true);this.$VideoRightButtonBase10=true;}}.bind(this));var l=function(m){var n=this.$VideoRightButtonBase3.getAttribute('value')===this.nextActionOnToggle(true);if(this.$VideoRightButtonBase1.length>1){var o=this.$VideoRightButtonBase1[this.$VideoRightButtonBase1.length-1],p=o;if(n&&!p||!n&&p){this.$VideoRightButtonBase3.setAttribute('value',this.nextActionOnToggle(p));c('FormSubmit').send(this.$VideoRightButtonBase4);}}this.$VideoRightButtonBase1=[];}.bind(this);c('AsyncFormRequestUtils').subscribe(this.$VideoRightButtonBase4,'response',l);};j.prototype.$VideoRightButtonBase17=function(){'use strict';if(!this.$VideoRightButtonBase14&&this.$VideoRightButtonBase8)c('CSS').addClass(this.$VideoRightButtonBase2,"_55c1");};j.prototype.$VideoRightButtonBase15=function(){'use strict';if(this.$VideoRightButtonBase16){c('CSS').removeClass(this.$VideoRightButtonBase2,"_55c1");clearTimeout(this.$VideoRightButtonBase19);this.$VideoRightButtonBase19=setTimeout(function(){return this.$VideoRightButtonBase17();}.bind(this),3000);}};j.prototype.toggleSwitchOnAnimation=function(){'use strict';throw new Error('This should be overwritten by children');};j.prototype.toggleSwitchOffAnimation=function(){'use strict';throw new Error('This should be overwritten by children');};j.prototype.nextActionOnToggle=function(k){'use strict';throw new Error('This should be overwritten by children');};j.prototype.nuxViewClicked=function(){'use strict';throw new Error('This should be overwritten by children');};j.prototype.nuxViewHidden=function(){'use strict';throw new Error('This should be overwritten by children');};f.exports=j;},null);
__d("XLiveSubscribeAsyncNuxController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/live\/subscribe\/nux\/",{action:{type:"String"},video_id:{type:"String"}});},null);
__d('VideoLiveFollowButton',['cx','fbt','AsyncRequest','VideoRightButtonBase','CSS','VideoBroadcastSubscriptionAction','DOM','XLiveSubscribeAsyncNuxController'],function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();j=babelHelpers.inherits(l,c('VideoRightButtonBase'));k=j&&j.prototype;function l(m,n,o,p,q,r,s,t,u,v){'use strict';k.constructor.call(this,m,n,o,q,r,s,t,v);this.$VideoLiveFollowButton1=o;this.$VideoLiveFollowButton2=q;this.$VideoLiveFollowButton3=p;this.$VideoLiveFollowButton4=s.getAttribute('value')===c('VideoBroadcastSubscriptionAction').UNSUBSCRIBE;if(this.$VideoLiveFollowButton4){this.setSwitchOnState(n);}else this.setSwitchOffState(n);this.$VideoLiveFollowButton5=m.getVideoID();this.setupAllHandlers();this.$VideoLiveFollowButton6=u;}l.prototype.nuxViewClicked=function(){'use strict';this.sendNuxSeenRequest('dismiss');};l.prototype.sendNuxSeenRequest=function(m){'use strict';new (c('AsyncRequest'))().setURI(c('XLiveSubscribeAsyncNuxController').getURIBuilder().getURI()).setData({action:m,video_id:this.$VideoLiveFollowButton5}).send();};l.prototype.nuxViewHidden=function(){'use strict';this.sendNuxSeenRequest('hide');};l.prototype.setSwitchOffState=function(m){'use strict';var n=i._("Live Notifications");c('CSS').removeClass(m,"_-kc");c('CSS').show(this.$VideoLiveFollowButton3);c('CSS').removeClass(this.$VideoLiveFollowButton1,"_knu");c('DOM').setContent(this.$VideoLiveFollowButton2,n);};l.prototype.setSwitchOnState=function(m){'use strict';var n=i._("Live Notifications");c('CSS').addClass(m,"_-kc");c('CSS').hide(this.$VideoLiveFollowButton3);c('CSS').addClass(this.$VideoLiveFollowButton1,"_knu");c('DOM').setContent(this.$VideoLiveFollowButton2,n);};l.prototype.nextActionOnToggle=function(m){'use strict';if(m){return c('VideoBroadcastSubscriptionAction').UNSUBSCRIBE;}else return c('VideoBroadcastSubscriptionAction').SUBSCRIBE;};l.prototype.toggleSwitchOnAnimation=function(m){'use strict';this.setSwitchOnState(m);};l.prototype.toggleSwitchOffAnimation=function(m){'use strict';this.setSwitchOffState(m);};f.exports=l;},null);
__d('InstreamVideoAdsController',['DOMQuery'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=null;function i(){'use strict';this.$InstreamVideoAdsController1=[];}i.prototype.$InstreamVideoAdsController2=function(j){'use strict';return this.$InstreamVideoAdsController1.find(function(k){return c('DOMQuery').contains(j,k.getRootNode());});};i.prototype.$InstreamVideoAdsController3=function(j){'use strict';if(this.$InstreamVideoAdsController1.includes(j))return;this.$InstreamVideoAdsController1.push(j);};i.registerVideoController=function(j){'use strict';if(h===null)h=new i();h.$InstreamVideoAdsController3(j);};i.findVideoControllerForStory=function(j){'use strict';if(h===null)return null;return h.$InstreamVideoAdsController2(j);};f.exports=i;},null);
__d('CommercialBreakVideoAdOverlay',['cx','Arbiter','CommercialBreakMobileEvent','CommercialBreakNoAdReason','CommercialBreakState','CSS','DOM','DOMDimensions','InstreamVideoAdsController','VideoPlayerAdditionalLogDataGetter','VideoPlayerLoggerEventField','VideoPlayerReason','getFullScreenElement'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j,k){'use strict';this.$CommercialBreakVideoAdOverlay6=k;this.$CommercialBreakVideoAdOverlay8=false;this.$CommercialBreakVideoAdOverlay1=j;this.$CommercialBreakVideoAdOverlay9=j.getVideoID();this.$CommercialBreakVideoAdOverlay10=false;this.$CommercialBreakVideoAdOverlay5=j.addListener('optionsChange',function(){return this.$CommercialBreakVideoAdOverlay11();}.bind(this));this.$CommercialBreakVideoAdOverlay11();}i.prototype.$CommercialBreakVideoAdOverlay11=function(){'use strict';this.$CommercialBreakVideoAdOverlay2=this.$CommercialBreakVideoAdOverlay1.getOption('VideoWithInstreamVideo','controller');if(!this.$CommercialBreakVideoAdOverlay2)return;this.$CommercialBreakVideoAdOverlay3=this.$CommercialBreakVideoAdOverlay1.getOption('VideoWithCommercialBreak','controller');if(!this.$CommercialBreakVideoAdOverlay3)return;this.$CommercialBreakVideoAdOverlay5.remove();this.$CommercialBreakVideoAdOverlay7=this.$CommercialBreakVideoAdOverlay2.getConfig();this.$CommercialBreakVideoAdOverlay3.addListener('commercialBreak/videoAdStoryFetched',function(j){if(j){c('DOM').appendContent(this.$CommercialBreakVideoAdOverlay6,j);this.$CommercialBreakVideoAdOverlay10=true;}}.bind(this));this.$CommercialBreakVideoAdOverlay3.addListener('commercialBreak/stateChange',function(j){var k=j.state;switch(k){case c('CommercialBreakState').PLAY_AD_COUNTDOWN:this.$CommercialBreakVideoAdOverlay4=c('InstreamVideoAdsController').findVideoControllerForStory(this.$CommercialBreakVideoAdOverlay6);if(this.$CommercialBreakVideoAdOverlay4){var l;this.$CommercialBreakVideoAdOverlay4.setAdditionalLogDataGetter(new (c('VideoPlayerAdditionalLogDataGetter'))(function(){return l={},l[c('VideoPlayerLoggerEventField').HOST_VIDEO_ID]=this.$CommercialBreakVideoAdOverlay9,l;}.bind(this)));this.$CommercialBreakVideoAdOverlay4.addListener('stateChange',function(){if(!this.$CommercialBreakVideoAdOverlay4||this.$CommercialBreakVideoAdOverlay4.isState('finished')){this.$CommercialBreakVideoAdOverlay12();this.$CommercialBreakVideoAdOverlay3.onLeaveTransition(false);}}.bind(this));this.$CommercialBreakVideoAdOverlay4.addListener('playRequested',function(n){if(n===c('VideoPlayerReason').USER)this.$CommercialBreakVideoAdOverlay2.logMarauderEvent(c('CommercialBreakMobileEvent').COMMERCIAL_BREAK_PLAY_AD);}.bind(this));this.$CommercialBreakVideoAdOverlay4.addListener('pauseRequested',function(n){if(n===c('VideoPlayerReason').USER)this.$CommercialBreakVideoAdOverlay2.logMarauderEvent(c('CommercialBreakMobileEvent').COMMERCIAL_BREAK_PAUSE_AD);}.bind(this));this.$CommercialBreakVideoAdOverlay2.registerInstreamVideo(this.$CommercialBreakVideoAdOverlay4);this.$CommercialBreakVideoAdOverlay13();this.$CommercialBreakVideoAdOverlay14();}else{var m=null;if(this.$CommercialBreakVideoAdOverlay7.isSponsored){m=c('CommercialBreakNoAdReason').SPONSORED_STORY;}else if(this.$CommercialBreakVideoAdOverlay10){m=c('CommercialBreakNoAdReason').NO_VIDEO_AD;}else m=c('CommercialBreakNoAdReason').WAIT_FOR_FAILED;this.$CommercialBreakVideoAdOverlay2.logMarauderEvent(c('CommercialBreakMobileEvent').COMMERCIAL_BREAK_STATIC_COUNTDOWN,{commercial_break_no_ad_reason:m});}break;case c('CommercialBreakState').INIT:case c('CommercialBreakState').LEAVING_TRANSITION:this.$CommercialBreakVideoAdOverlay12();break;}}.bind(this));};i.prototype.$CommercialBreakVideoAdOverlay13=function(){'use strict';if(!this.$CommercialBreakVideoAdOverlay4)return;var j=c('DOMDimensions').getElementDimensions(this.$CommercialBreakVideoAdOverlay1.getRootNode());if(this.$CommercialBreakVideoAdOverlay1.isFullscreen())j=c('DOMDimensions').getElementDimensions(c('getFullScreenElement')());this.$CommercialBreakVideoAdOverlay4.setDimensions(j.width,j.height);};i.prototype.$CommercialBreakVideoAdOverlay14=function(){'use strict';if(this.$CommercialBreakVideoAdOverlay8)return;this.$CommercialBreakVideoAdOverlay8=true;c('CSS').removeClass(this.$CommercialBreakVideoAdOverlay6,"_50m2");this.$CommercialBreakVideoAdOverlay2.logMarauderEvent(c('CommercialBreakMobileEvent').COMMERCIAL_BREAK_START_AD,{commercial_break_ad_client_token:this.$CommercialBreakVideoAdOverlay4.getAdClientToken()});this.$CommercialBreakVideoAdOverlay4.play(c('VideoPlayerReason').AUTOPLAY);c('Arbiter').inform('CommercialBreak/AdsLoaded');this.$CommercialBreakVideoAdOverlay1.addListener('VideoChannelController/exitChannel',this.$CommercialBreakVideoAdOverlay13.bind(this));this.$CommercialBreakVideoAdOverlay1.addListener('toggleFullscreen',this.$CommercialBreakVideoAdOverlay13.bind(this));this.$CommercialBreakVideoAdOverlay1.addListener('WatchAndScroll/positionUpdated',this.$CommercialBreakVideoAdOverlay13.bind(this));};i.prototype.$CommercialBreakVideoAdOverlay12=function(){'use strict';if(!this.$CommercialBreakVideoAdOverlay8)return;this.$CommercialBreakVideoAdOverlay8=false;this.$CommercialBreakVideoAdOverlay10=false;c('CSS').addClass(this.$CommercialBreakVideoAdOverlay6,"_50m2");if(this.$CommercialBreakVideoAdOverlay4){this.$CommercialBreakVideoAdOverlay4.pause(c('VideoPlayerReason').AUTOPLAY);this.$CommercialBreakVideoAdOverlay4=null;}if(this.$CommercialBreakVideoAdOverlay6.children.length>0)c('DOM').remove(this.$CommercialBreakVideoAdOverlay6.children[0]);};f.exports=i;},null);
__d('CountdownTimer.react',['fbt','React'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=1000,m=3600,n=m*24*l;function o(t){if(t<10){return "0"+t;}else return t.toString();}function p(t,u){var v=0;while(v<t.length&&u(t[v]))v+=1;return t.slice(v);}function q(t){t=p(t,function(v){return v===0;});if(t.length===0){return "0";}else{for(var u=1;u<t.length;u+=1)t[u]=o(t[u]);return t.join(":");}}var r={HUMAN:'human',DIGITAL:'digital'};i=babelHelpers.inherits(s,c('React').Component);j=i&&i.prototype;function s(){var t,u;'use strict';for(var v=arguments.length,w=Array(v),x=0;x<v;x++)w[x]=arguments[x];return t=(u=j.constructor).call.apply(u,[this].concat(w)),this.$CountdownTimer1=function(){return Math.max(this.props.endTime-Date.now(),0);}.bind(this),this.$CountdownTimer2=function(){var y=this.$CountdownTimer1();this.setState({remainingTime:y});if(y<=0){clearInterval(this.interval);if(this.props.onComplete)this.props.onComplete();}}.bind(this),this.formatTime=function(y,z,aa){if(this.props.format==r.DIGITAL){return q([y,z,aa]);}else if(this.props.format==r.HUMAN){return h._({"*":{"*":{"*":"{hours}h {mins}m {seconds}s"}}},[h.param('hours',y,[0]),h.param('mins',z,[0]),h.param('seconds',aa,[0])]);}else throw new Error('Unknown format: '+this.props.format);}.bind(this),this.state={remainingTime:this.$CountdownTimer1()},t;}s.prototype.componentDidMount=function(){'use strict';this.$CountdownTimer2();this.interval=setInterval(this.$CountdownTimer2,l);};s.prototype.componentWillUnmount=function(){'use strict';clearInterval(this.interval);};s.prototype.render=function(){'use strict';var t=this.state.remainingTime;if(t>=n){var u=Math.floor(t/n);return c('React').createElement('span',null,u===1?h._("1 day"):h._({"*":"{number} days"},[h.param('number',u,[0])]));}else{var v=Math.ceil(t/l),w=Math.floor(v/m),x=new Date(v%m*l),y=x.getUTCMinutes(),z=x.getSeconds();return c('React').createElement('span',null,this.formatTime(w,y,z));}};s.propTypes={endTime:k.number.isRequired,format:k.oneOf([r.HUMAN,r.DIGITAL]).isRequired,onComplete:k.func};f.exports=s;},null);
__d('VideoCommercialBreakClickToChannelOverlay',['cx','fbt','CommercialBreakState','CountdownTimer.react','CSS','EventListener','React','ReactDOM','UFIReactionsBlingTokens.react'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k,l,m,n){'use strict';this.$VideoCommercialBreakClickToChannelOverlay1=l;this.$VideoCommercialBreakClickToChannelOverlay2=m;this.$VideoCommercialBreakClickToChannelOverlay3=n;this.$VideoCommercialBreakClickToChannelOverlay4=false;this.$VideoCommercialBreakClickToChannelOverlay5=false;this.$VideoCommercialBreakClickToChannelOverlay6=k;this.$VideoCommercialBreakClickToChannelOverlay8=k.addListener('optionsChange',function(){return this.$VideoCommercialBreakClickToChannelOverlay9();}.bind(this));this.$VideoCommercialBreakClickToChannelOverlay9();}j.prototype.$VideoCommercialBreakClickToChannelOverlay9=function(){'use strict';this.$VideoCommercialBreakClickToChannelOverlay7=this.$VideoCommercialBreakClickToChannelOverlay6.getOption('VideoWithCommercialBreak','controller');if(!this.$VideoCommercialBreakClickToChannelOverlay7)return;this.$VideoCommercialBreakClickToChannelOverlay8.remove();this.$VideoCommercialBreakClickToChannelOverlay7.addListener('commercialBreak/stateChange',function(k){var l=k.state,m=k.countdownDurationMsecs;this.$VideoCommercialBreakClickToChannelOverlay10(l,m);}.bind(this));c('EventListener').listen(this.$VideoCommercialBreakClickToChannelOverlay1,'click',function(){return this.$VideoCommercialBreakClickToChannelOverlay11();}.bind(this));this.$VideoCommercialBreakClickToChannelOverlay6.addListener('stateChange',this.$VideoCommercialBreakClickToChannelOverlay12.bind(this));};j.prototype.$VideoCommercialBreakClickToChannelOverlay10=function(k,l){'use strict';switch(k){case c('CommercialBreakState').ENTERING_TRANSITION:this.$VideoCommercialBreakClickToChannelOverlay4=true;break;case c('CommercialBreakState').PLAY_AD_COUNTDOWN:if(this.$VideoCommercialBreakClickToChannelOverlay4)break;this.$VideoCommercialBreakClickToChannelOverlay5=true;this.$VideoCommercialBreakClickToChannelOverlay13(l);break;case c('CommercialBreakState').INIT:this.$VideoCommercialBreakClickToChannelOverlay14();this.$VideoCommercialBreakClickToChannelOverlay4=false;this.$VideoCommercialBreakClickToChannelOverlay5=false;break;}this.$VideoCommercialBreakClickToChannelOverlay12();};j.prototype.$VideoCommercialBreakClickToChannelOverlay11=function(){'use strict';this.$VideoCommercialBreakClickToChannelOverlay6.clickVideo();};j.prototype.$VideoCommercialBreakClickToChannelOverlay13=function(k){'use strict';c('ReactDOM').unmountComponentAtNode(this.$VideoCommercialBreakClickToChannelOverlay2);var l=null,m=null;if(k){l=c('React').createElement('span',{className:"_4ehy"},c('React').createElement(c('CountdownTimer.react'),{endTime:Date.now()+k,format:'digital'}));m=c('React').createElement('span',null,i._("Commercial Break \u00b7 Live resumes in"));}else m=c('React').createElement('span',null,i._("Commercial Break \u00b7 Live resumes soon"));c('ReactDOM').render(c('React').createElement('div',{className:"_4ehz"},m,l,c('React').createElement('div',{className:"_4eh_"},c('React').createElement(c('UFIReactionsBlingTokens.react'),{feedback:this.$VideoCommercialBreakClickToChannelOverlay3,contextArgs:{},max:3,size:'16'}))),this.$VideoCommercialBreakClickToChannelOverlay2);};j.prototype.$VideoCommercialBreakClickToChannelOverlay14=function(){'use strict';c('ReactDOM').unmountComponentAtNode(this.$VideoCommercialBreakClickToChannelOverlay2);};j.prototype.$VideoCommercialBreakClickToChannelOverlay15=function(){'use strict';c('CSS').addClass(this.$VideoCommercialBreakClickToChannelOverlay6.getVideoNode(),"_4ei0");c('CSS').removeClass(this.$VideoCommercialBreakClickToChannelOverlay1,"_4ei1");};j.prototype.$VideoCommercialBreakClickToChannelOverlay16=function(){'use strict';c('CSS').removeClass(this.$VideoCommercialBreakClickToChannelOverlay6.getVideoNode(),"_4ei0");c('CSS').addClass(this.$VideoCommercialBreakClickToChannelOverlay1,"_4ei1");};j.prototype.$VideoCommercialBreakClickToChannelOverlay12=function(){'use strict';if(!this.$VideoCommercialBreakClickToChannelOverlay6.getIsInChannel()&&!this.$VideoCommercialBreakClickToChannelOverlay6.isFullscreen()&&this.$VideoCommercialBreakClickToChannelOverlay5){this.$VideoCommercialBreakClickToChannelOverlay15();}else this.$VideoCommercialBreakClickToChannelOverlay16();};f.exports=j;},null);
__d('VideoCommercialBreakTransitionOverlay',['cx','fbt','CommercialBreakState','CountdownTimer.react','CSS','SubscriptionsHandler','React','ReactDOM'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k,l,m){'use strict';this.$VideoCommercialBreakTransitionOverlay1=l;this.$VideoCommercialBreakTransitionOverlay2=m;this.$VideoCommercialBreakTransitionOverlay5=false;this.$VideoCommercialBreakTransitionOverlay6=false;this.$VideoCommercialBreakTransitionOverlay7=new (c('SubscriptionsHandler'))();this.$VideoCommercialBreakTransitionOverlay3=k;this.$VideoCommercialBreakTransitionOverlay4=k.addListener('optionsChange',function(){return this.$VideoCommercialBreakTransitionOverlay8();}.bind(this));this.$VideoCommercialBreakTransitionOverlay8();}j.prototype.$VideoCommercialBreakTransitionOverlay8=function(){'use strict';var k=this.$VideoCommercialBreakTransitionOverlay3.getOption('VideoWithCommercialBreak','controller');if(!k)return;this.$VideoCommercialBreakTransitionOverlay4.remove();this.$VideoCommercialBreakTransitionOverlay7.engage();this.$VideoCommercialBreakTransitionOverlay7.addSubscriptions(k.addListener('commercialBreak/stateChange',function(l){var m=l.state,n=l.countdownDurationMsecs;this.$VideoCommercialBreakTransitionOverlay9(m,n);}.bind(this)));this.$VideoCommercialBreakTransitionOverlay3.addListener('VideoChannelController/exitChannel',this.$VideoCommercialBreakTransitionOverlay10.bind(this));this.$VideoCommercialBreakTransitionOverlay3.addListener('stateChange',this.$VideoCommercialBreakTransitionOverlay10.bind(this));};j.prototype.$VideoCommercialBreakTransitionOverlay9=function(k,l){'use strict';switch(k){case c('CommercialBreakState').ENTERING_TRANSITION:case c('CommercialBreakState').VOD_BREAK_WITH_NO_VIDEO_AD:this.$VideoCommercialBreakTransitionOverlay5=true;this.$VideoCommercialBreakTransitionOverlay6=true;this.$VideoCommercialBreakTransitionOverlay11(i._("will be back soon"));this.$VideoCommercialBreakTransitionOverlay3.emit('commercialBreak/hideUFI');break;case c('CommercialBreakState').PLAY_AD_COUNTDOWN:this.$VideoCommercialBreakTransitionOverlay5=true;if(l){this.$VideoCommercialBreakTransitionOverlay11(i._("will return in"),l);}else this.$VideoCommercialBreakTransitionOverlay11(i._("will be back soon"));break;case c('CommercialBreakState').LEAVING_TRANSITION:this.$VideoCommercialBreakTransitionOverlay5=true;this.$VideoCommercialBreakTransitionOverlay11(i._("is returning now"));break;case c('CommercialBreakState').INIT:this.$VideoCommercialBreakTransitionOverlay5=false;this.$VideoCommercialBreakTransitionOverlay6=false;this.$VideoCommercialBreakTransitionOverlay12();this.$VideoCommercialBreakTransitionOverlay3.emit('commercialBreak/showUFI');break;}this.$VideoCommercialBreakTransitionOverlay10();};j.prototype.$VideoCommercialBreakTransitionOverlay11=function(k,l){'use strict';c('ReactDOM').unmountComponentAtNode(this.$VideoCommercialBreakTransitionOverlay2);var m=null;if(l)m=c('React').createElement('div',{className:"_4fih"},c('React').createElement(c('CountdownTimer.react'),{endTime:Date.now()+l,format:'digital'}));c('ReactDOM').render(c('React').createElement('div',null,c('React').createElement('div',{className:"_4fid"},k),m),this.$VideoCommercialBreakTransitionOverlay2);};j.prototype.$VideoCommercialBreakTransitionOverlay12=function(){'use strict';c('ReactDOM').unmountComponentAtNode(this.$VideoCommercialBreakTransitionOverlay2);};j.prototype.$VideoCommercialBreakTransitionOverlay13=function(){'use strict';c('CSS').addClass(this.$VideoCommercialBreakTransitionOverlay1,"_4fii");var k=this.$VideoCommercialBreakTransitionOverlay3&&this.$VideoCommercialBreakTransitionOverlay3.getVideoNode();if(k)c('CSS').removeClass(k,"_1_d3");};j.prototype.$VideoCommercialBreakTransitionOverlay14=function(){'use strict';c('CSS').removeClass(this.$VideoCommercialBreakTransitionOverlay1,"_4fii");c('CSS').addClass(this.$VideoCommercialBreakTransitionOverlay3.getVideoNode(),"_1_d3");};j.prototype.$VideoCommercialBreakTransitionOverlay10=function(){'use strict';if(this.$VideoCommercialBreakTransitionOverlay6||this.$VideoCommercialBreakTransitionOverlay5&&(this.$VideoCommercialBreakTransitionOverlay3.getIsInChannel()||this.$VideoCommercialBreakTransitionOverlay3.isFullscreen())){this.$VideoCommercialBreakTransitionOverlay14();}else this.$VideoCommercialBreakTransitionOverlay13();};f.exports=j;},null);
__d("XInstreamVideoSponsoredStoryAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/video\/instream_video_ads\/view\/story\/async\/",{ad_index_in_viewer_session:{type:"Int",required:true},host_video_id:{type:"FBID",required:true},max_duration_in_ms:{type:"Int",required:true},min_duration_in_ms:{type:"Int",required:true},min_aspect_ratio:{type:"Float",required:true},is_live:{type:"Bool",defaultValue:false}});},null);
__d('VideoWithCommercialBreak',['AsyncRequest','AsyncResponse','CommercialBreakMobileEvent','CommercialBreakState','EventEmitter','RTISubscriptionManager','SubscriptionsHandler','XInstreamVideoSponsoredStoryAsyncController'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();var j={INTENT:'intent',START:'start'},k={MSEC_PER_SEC:1000,CHECK_INTERVAL:1000};h=babelHelpers.inherits(l,c('EventEmitter'));i=h&&h.prototype;function l(m){'use strict';i.constructor.call(this);this.$VideoWithCommercialBreak4=c('CommercialBreakState').INIT;this.$VideoWithCommercialBreak7=0;this.$VideoWithCommercialBreak10=new (c('SubscriptionsHandler'))();this.$VideoWithCommercialBreak1=m;this.$VideoWithCommercialBreak11=false;this.$VideoWithCommercialBreak2=m.addListener('optionsChange',function(){return this.$VideoWithCommercialBreak12();}.bind(this));this.$VideoWithCommercialBreak12();}l.prototype.$VideoWithCommercialBreak12=function(){'use strict';this.$VideoWithCommercialBreak8=this.$VideoWithCommercialBreak1.getOption('VideoWithInstreamVideo','controller');if(!this.$VideoWithCommercialBreak8)return;this.$VideoWithCommercialBreak2.remove();this.$VideoWithCommercialBreak3=this.$VideoWithCommercialBreak8.getConfig();this.$VideoWithCommercialBreak9=Date.now();this.reset();this.$VideoWithCommercialBreak1.registerOption('VideoWithCommercialBreak','enabled',function(){return true;});this.$VideoWithCommercialBreak1.registerOption('VideoWithCommercialBreak','controller',function(){return this;}.bind(this));if(this.$VideoWithCommercialBreak3.skywalkerTopic){c('RTISubscriptionManager').subscribe(this.$VideoWithCommercialBreak3.skywalkerTopic,this.$VideoWithCommercialBreak13.bind(this));this.$VideoWithCommercialBreak8.logMarauderEvent(c('CommercialBreakMobileEvent').SUBSCRIPTION_SUCCESS);}};l.prototype.$VideoWithCommercialBreak14=function(m){var n=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];'use strict';if(m===this.$VideoWithCommercialBreak4)return;n.state=m;if(m===c('CommercialBreakState').INIT){this.$VideoWithCommercialBreak8.resetInstreamVideo();this.$VideoWithCommercialBreak10.release();this.$VideoWithCommercialBreak10.engage();this.$VideoWithCommercialBreak11=false;}else if(m===c('CommercialBreakState').ENTERING_TRANSITION||m===c('CommercialBreakState').PLAY_AD_COUNTDOWN||m===c('CommercialBreakState').LEAVING_TRANSITION||m===c('CommercialBreakState').VOD_BREAK_WITH_NO_VIDEO_AD)this.$VideoWithCommercialBreak8.registerInstreamVideo(null);this.emit('commercialBreak/stateChange',n);this.$VideoWithCommercialBreak4=m;};l.prototype.reset=function(){'use strict';this.$VideoWithCommercialBreak14(c('CommercialBreakState').INIT);this.$VideoWithCommercialBreak5=0;this.$VideoWithCommercialBreak6=-1;};l.prototype.$VideoWithCommercialBreak13=function(m){'use strict';m=JSON.parse(m.payload);var n=m.type;if(n===j.START){this.onStartCommand(m);}else if(n===j.INTENT){this.onIntentCommand(m);}else this.$VideoWithCommercialBreak8.logMarauderEvent(c('CommercialBreakMobileEvent').RECEIVE_INVALID_MSG);};l.prototype.onIntentCommand=function(m){'use strict';var n=m.commercial_break_length_ms?parseInt(m.commercial_break_length_ms,10):null;if(this.$VideoWithCommercialBreak3.isLive)this.$VideoWithCommercialBreak8.logMarauderEvent(c('CommercialBreakMobileEvent').RECEIVE_INTENT_MSG,{topic:this.$VideoWithCommercialBreak3.skywalkerTopic,commercial_break_length_ms:n});if(this.$VideoWithCommercialBreak4!==c('CommercialBreakState').INIT&&this.$VideoWithCommercialBreak4!==c('CommercialBreakState').PREPARE&&this.$VideoWithCommercialBreak4!==c('CommercialBreakState').AD_REQUEST_SENT)return;this.$VideoWithCommercialBreak14(c('CommercialBreakState').INIT);this.$VideoWithCommercialBreak14(c('CommercialBreakState').PREPARE);if(this.$VideoWithCommercialBreak3.isLive&&n)this.$VideoWithCommercialBreak5=n;if(this.$VideoWithCommercialBreak3.isSponsored)return;var o=m.max_video_ad_length_ms?parseInt(m.max_video_ad_length_ms,10):null,p=m.min_video_ad_length_ms?parseInt(m.min_video_ad_length_ms,10):null,q=this.$VideoWithCommercialBreak3.isLive?this.$VideoWithCommercialBreak5-this.$VideoWithCommercialBreak3.beginningTransitionTimeMs-this.$VideoWithCommercialBreak3.endingTransitionTimeMs:o,r=this.$VideoWithCommercialBreak3.isLive?this.$VideoWithCommercialBreak3.videoAdMinDurationMs:p,s=c('XInstreamVideoSponsoredStoryAsyncController').getURIBuilder().setInt('ad_index_in_viewer_session',++this.$VideoWithCommercialBreak7).setFBID('host_video_id',this.$VideoWithCommercialBreak1.getVideoID()).setFloat('min_aspect_ratio',this.$VideoWithCommercialBreak3.videoAdMinAspectRatio).setBool('is_live',this.$VideoWithCommercialBreak3.isLive);if(q)s.setInt('max_duration_in_ms',q);if(r)s.setInt('min_duration_in_ms',r);new (c('AsyncRequest'))(s.getURI()).setMethod('GET').setReadOnly(true).setHandler(this.$VideoWithCommercialBreak15.bind(this)).setErrorHandler(this.$VideoWithCommercialBreak16.bind(this)).send();this.$VideoWithCommercialBreak14(c('CommercialBreakState').AD_REQUEST_SENT);};l.prototype.$VideoWithCommercialBreak16=function(){'use strict';this.$VideoWithCommercialBreak8.logMarauderEvent(c('CommercialBreakMobileEvent').VIDEO_FETCH_FAILURE);};l.prototype.$VideoWithCommercialBreak15=function(m){'use strict';if(this.$VideoWithCommercialBreak4!==c('CommercialBreakState').AD_REQUEST_SENT&&this.$VideoWithCommercialBreak4!==c('CommercialBreakState').CB_SCHEDULED&&this.$VideoWithCommercialBreak4!==c('CommercialBreakState').ENTERING_TRANSITION)return;var n=m.getPayload().videoAdStory;if(n){this.emit('commercialBreak/videoAdStoryFetched',n);this.$VideoWithCommercialBreak11=!!n.__html;this.$VideoWithCommercialBreak8.logMarauderEvent(c('CommercialBreakMobileEvent').VIDEO_FETCH_SUCCESS,{is_empty:!this.$VideoWithCommercialBreak11});}else this.$VideoWithCommercialBreak8.logMarauderEvent(c('CommercialBreakMobileEvent').VIDEO_FETCH_FAILURE);};l.prototype.onStartCommand=function(m){'use strict';var n=parseInt(m.commercial_break_start_time_ms,10);this.$VideoWithCommercialBreak6=n;if(this.$VideoWithCommercialBreak3.isLive)this.$VideoWithCommercialBreak8.logMarauderEvent(c('CommercialBreakMobileEvent').RECEIVE_START_MSG,{topic:this.$VideoWithCommercialBreak3.skywalkerTopic,commercial_break_start_time_ms:n});var o=this.$VideoWithCommercialBreak17();if(n<o-this.$VideoWithCommercialBreak3.allowedStartTimeDeltaMs)return;if(this.$VideoWithCommercialBreak4!==c('CommercialBreakState').INIT&&this.$VideoWithCommercialBreak4!==c('CommercialBreakState').PREPARE&&this.$VideoWithCommercialBreak4!==c('CommercialBreakState').AD_REQUEST_SENT)return;if(this.$VideoWithCommercialBreak4===c('CommercialBreakState').INIT)this.$VideoWithCommercialBreak18();this.$VideoWithCommercialBreak14(c('CommercialBreakState').CB_SCHEDULED);setTimeout(this.$VideoWithCommercialBreak19.bind(this),n-o);this.$VideoWithCommercialBreak10.addSubscriptions(this.$VideoWithCommercialBreak1.addListener('streamInterrupted',this.$VideoWithCommercialBreak19.bind(this,true)));};l.prototype.$VideoWithCommercialBreak19=function(){var m=arguments.length<=0||arguments[0]===undefined?false:arguments[0];'use strict';if(this.$VideoWithCommercialBreak4!==c('CommercialBreakState').CB_SCHEDULED)return;var n=this.$VideoWithCommercialBreak17(),o=this.$VideoWithCommercialBreak6-n,p=o>0&&o<=this.$VideoWithCommercialBreak3.startFromStreamDryDeltaMs&&this.$VideoWithCommercialBreak1.isBuffering();if(Math.abs(o)<=this.$VideoWithCommercialBreak3.allowedStartTimeDeltaMs||p||m){var q=m?'stream_dry_out':'normal';this.$VideoWithCommercialBreak8.logMarauderEvent(c('CommercialBreakMobileEvent').COMMERCIAL_BREAK_START,{timestamp_delta_ms:parseInt(o,10),playback_trigger_event:q});this.$VideoWithCommercialBreak14(c('CommercialBreakState').ENTERING_TRANSITION);this.$VideoWithCommercialBreak8.logMarauderEvent(c('CommercialBreakMobileEvent').COMMERCIAL_BREAK_TRANSIT);setTimeout(this.$VideoWithCommercialBreak20.bind(this),this.$VideoWithCommercialBreak3.beginningTransitionTimeMs);}else if(n>this.$VideoWithCommercialBreak6){this.reset();}else setTimeout(this.$VideoWithCommercialBreak19.bind(this),Math.min(k.CHECK_INTERVAL,o));};l.prototype.$VideoWithCommercialBreak20=function(){'use strict';if(this.$VideoWithCommercialBreak4!==c('CommercialBreakState').CB_SCHEDULED&&this.$VideoWithCommercialBreak4!==c('CommercialBreakState').ENTERING_TRANSITION&&this.$VideoWithCommercialBreak4!==c('CommercialBreakState').PLAY_AD_COUNTDOWN)return;var m=this.$VideoWithCommercialBreak5-this.$VideoWithCommercialBreak3.beginningTransitionTimeMs-this.$VideoWithCommercialBreak3.endingTransitionTimeMs;this.$VideoWithCommercialBreak14(c('CommercialBreakState').PLAY_AD_COUNTDOWN,{countdownDurationMsecs:this.$VideoWithCommercialBreak3.isLive?m:0});if(this.$VideoWithCommercialBreak3.isLive)setTimeout(this.onLeaveTransition.bind(this),m);};l.prototype.$VideoWithCommercialBreak18=function(){'use strict';var m=this.$VideoWithCommercialBreak17();if(this.$VideoWithCommercialBreak1.isBuffering()&&m>this.$VideoWithCommercialBreak6){this.reset();}else setTimeout(this.$VideoWithCommercialBreak18.bind(this),k.CHECK_INTERVAL);};l.prototype.onLeaveTransition=function(){var m=arguments.length<=0||arguments[0]===undefined?true:arguments[0];'use strict';if(this.$VideoWithCommercialBreak4===c('CommercialBreakState').PLAY_AD_COUNTDOWN){this.$VideoWithCommercialBreak8.logMarauderEvent(c('CommercialBreakMobileEvent').COMMERCIAL_BREAK_TRANSIT);this.$VideoWithCommercialBreak14(c('CommercialBreakState').LEAVING_TRANSITION);if(this.$VideoWithCommercialBreak1.isState('playing')||!this.$VideoWithCommercialBreak3.isLive){var n=m?'cut_off':'playback_finished';this.$VideoWithCommercialBreak8.logMarauderEvent(c('CommercialBreakMobileEvent').COMMERCIAL_BREAK_END,{ending_reason:n});}}if(!this.$VideoWithCommercialBreak3.isLive||m)setTimeout(this.reset.bind(this),this.$VideoWithCommercialBreak3.endingTransitionTimeMs);};l.prototype.$VideoWithCommercialBreak17=function(){'use strict';var m=this.$VideoWithCommercialBreak1.getCurrentTimePosition()*k.MSEC_PER_SEC;return m;};l.prototype.startBreakWithNoVideoAd=function(m){'use strict';this.reset();this.$VideoWithCommercialBreak14(c('CommercialBreakState').VOD_BREAK_WITH_NO_VIDEO_AD);this.$VideoWithCommercialBreak8.logMarauderEvent(c('CommercialBreakMobileEvent').COMMERCIAL_BREAK_NO_AD_TRANSITION,{commercial_break_no_ad_reason:m});setTimeout(function(){return this.reset();}.bind(this),this.$VideoWithCommercialBreak3.breakWithNoVideoAdDurationMs);};l.prototype.getReceivedAdStory=function(){'use strict';return this.$VideoWithCommercialBreak11;};f.exports=l;},null);
__d('VideoWithInstreamVideo',['CommercialBreakMobileEvent','EventEmitter','InstreamVideoAdType','MarauderLogger','SubscriptionsHandler','VideoPlayerApiEvents','VideoPlayerReason'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('EventEmitter'));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this);this.$VideoWithInstreamVideo4=k;this.$VideoWithInstreamVideo1=new (c('SubscriptionsHandler'))();this.$VideoWithInstreamVideo10=false;}j.prototype.enable=function(k){'use strict';if(this.$VideoWithInstreamVideo2)return;this.$VideoWithInstreamVideo2=k;this.$VideoWithInstreamVideo3=k;this.$VideoWithInstreamVideo5=k.isState('playing');this.$VideoWithInstreamVideo6=true;this.$VideoWithInstreamVideo8='';this.$VideoWithInstreamVideo1.engage();this.$VideoWithInstreamVideo11();this.$VideoWithInstreamVideo12();this.$VideoWithInstreamVideo2.registerOption('VideoWithInstreamVideo','enabled',function(){return true;});this.$VideoWithInstreamVideo2.registerOption('VideoWithInstreamVideo','controller',function(){return this;}.bind(this));};j.prototype.disable=function(){'use strict';};j.prototype.$VideoWithInstreamVideo13=function(){'use strict';var k=['play','pause','mute','unmute','constructor','destroy','addListener','resetInstreamVideo','registerInstreamVideo','destroy','getRootNode','getVideoNode','emit'],l=this.$VideoWithInstreamVideo2.constructor.prototype,m=Object.getOwnPropertyNames(l).filter(function(n){var o=l[n];return typeof o==='function'&&k.indexOf(n)<0;});return m;};j.prototype.$VideoWithInstreamVideo11=function(){'use strict';var k=this.$VideoWithInstreamVideo13(),l=function(m){this.constructor.prototype[m]=function(){return this.$VideoWithInstreamVideo2[m].apply(this.$VideoWithInstreamVideo2,arguments);};};k.forEach(l,this);};j.prototype.$VideoWithInstreamVideo14=function(){'use strict';var k=this.$VideoWithInstreamVideo13();k.forEach(function(l){return delete this.constructor.prototype[l];}.bind(this));};j.prototype.$VideoWithInstreamVideo15=function(k){var l;'use strict';(l=i.emit).call.apply(l,[this].concat(Array.prototype.slice.call(arguments)));};j.prototype.emit=function(k){var l;'use strict';if(c('VideoPlayerApiEvents').indexOf(k)<0)this.$VideoWithInstreamVideo15.apply(this,arguments);(l=this.$VideoWithInstreamVideo2).emit.apply(l,arguments);};j.prototype.$VideoWithInstreamVideo12=function(){'use strict';var k=function(event){return this.$VideoWithInstreamVideo15.bind(this,event);}.bind(this);this.$VideoWithInstreamVideo1.addSubscriptions.apply(this.$VideoWithInstreamVideo1,c('VideoPlayerApiEvents').map(function(event){return this.$VideoWithInstreamVideo2.addListener(event,k(event));}.bind(this)));};j.prototype.registerInstreamVideo=function(k){'use strict';if(!this.$VideoWithInstreamVideo10){this.$VideoWithInstreamVideo10=true;this.$VideoWithInstreamVideo2.instreamVideoStart();}if(this.$VideoWithInstreamVideo3===this.$VideoWithInstreamVideo2){this.$VideoWithInstreamVideo5=this.$VideoWithInstreamVideo2.isState('playing');this.$VideoWithInstreamVideo6=this.$VideoWithInstreamVideo2.isMuted();this.$VideoWithInstreamVideo7=this.$VideoWithInstreamVideo2.getVolume();}if(this.$VideoWithInstreamVideo3!==null)if(this.$VideoWithInstreamVideo4.isLive){this.$VideoWithInstreamVideo3.mute();}else this.$VideoWithInstreamVideo3.pause(c('VideoPlayerReason').AUTOPLAY);this.$VideoWithInstreamVideo3=k;if(this.$VideoWithInstreamVideo3&&this.$VideoWithInstreamVideo5){this.$VideoWithInstreamVideo3.play(c('VideoPlayerReason').AUTOPLAY);if(this.$VideoWithInstreamVideo6){this.$VideoWithInstreamVideo3.mute();}else{this.$VideoWithInstreamVideo3.unmute();this.$VideoWithInstreamVideo3.setVolume(this.$VideoWithInstreamVideo7);}}};j.prototype.resetInstreamVideo=function(){'use strict';var k=this.$VideoWithInstreamVideo3;this.$VideoWithInstreamVideo3=this.$VideoWithInstreamVideo2;this.$VideoWithInstreamVideo8=this.$VideoWithInstreamVideo8?this.$VideoWithInstreamVideo8:c('VideoPlayerReason').AUTOPLAY;this.$VideoWithInstreamVideo9=this.$VideoWithInstreamVideo9?this.$VideoWithInstreamVideo9:c('VideoPlayerReason').AUTOPLAY;if(k!==this.$VideoWithInstreamVideo3){if(this.$VideoWithInstreamVideo6){this.$VideoWithInstreamVideo3.mute();}else this.$VideoWithInstreamVideo3.unmute();if(this.$VideoWithInstreamVideo5){this.$VideoWithInstreamVideo3.play(this.$VideoWithInstreamVideo8);}else this.$VideoWithInstreamVideo3.pause(this.$VideoWithInstreamVideo9);}this.$VideoWithInstreamVideo10=false;this.$VideoWithInstreamVideo2.instreamVideoEnd();};j.prototype.play=function(k){'use strict';this.$VideoWithInstreamVideo5=true;this.$VideoWithInstreamVideo8=k;if(this.$VideoWithInstreamVideo3)this.$VideoWithInstreamVideo3.play(k);if(this.$VideoWithInstreamVideo4.isLive&&this.$VideoWithInstreamVideo3!=this.$VideoWithInstreamVideo2)this.$VideoWithInstreamVideo2.play(k);if((k===c('VideoPlayerReason').AUTOPLAY||k===c('VideoPlayerReason').PAGE_VISIBILITY)&&this.$VideoWithInstreamVideo3!=this.$VideoWithInstreamVideo2)this.logMarauderEvent(c('CommercialBreakMobileEvent').COMMERCIAL_BREAK_SCROLLED_INTO);};j.prototype.pause=function(k){'use strict';this.$VideoWithInstreamVideo5=false;this.$VideoWithInstreamVideo9=k;if(this.$VideoWithInstreamVideo3)this.$VideoWithInstreamVideo3.pause(k);if(this.$VideoWithInstreamVideo4.isLive&&this.$VideoWithInstreamVideo3!=this.$VideoWithInstreamVideo2)this.$VideoWithInstreamVideo2.pause(k);if((k===c('VideoPlayerReason').AUTOPLAY||k===c('VideoPlayerReason').PAGE_VISIBILITY)&&this.$VideoWithInstreamVideo3!=this.$VideoWithInstreamVideo2)this.logMarauderEvent(c('CommercialBreakMobileEvent').COMMERCIAL_BREAK_SCROLLED_AWAY);};j.prototype.mute=function(){'use strict';this.$VideoWithInstreamVideo6=true;if(this.$VideoWithInstreamVideo3)this.$VideoWithInstreamVideo3.mute();};j.prototype.unmute=function(){'use strict';this.$VideoWithInstreamVideo6=false;if(this.$VideoWithInstreamVideo3)this.$VideoWithInstreamVideo3.unmute();};j.prototype.destroy=function(){'use strict';if(this.$VideoWithInstreamVideo3!=this.$VideoWithInstreamVideo2)this.$VideoWithInstreamVideo3.destroy();this.$VideoWithInstreamVideo2.destroy();};j.prototype.getVideoNode=function(){'use strict';return this.$VideoWithInstreamVideo2.getVideoNode();};j.prototype.getRootNode=function(){'use strict';return this.$VideoWithInstreamVideo2.getRootNode();};j.prototype.getConfig=function(){'use strict';return this.$VideoWithInstreamVideo4;};j.prototype.$VideoWithInstreamVideo16=function(){'use strict';if(this.$VideoWithInstreamVideo4.isLive)return c('InstreamVideoAdType').LIVE;return c('InstreamVideoAdType').VOD;};j.prototype.logMarauderEvent=function(k){var l=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];'use strict';l.host_video_id=this.$VideoWithInstreamVideo2.getVideoID();l.instream_video_ad_type=this.$VideoWithInstreamVideo16();c('MarauderLogger').log(k,'commercial_break',l);};f.exports=j;},null);
__d('StreamingReactionsTrayConfig',['EventEmitter','StreamingReactionsAnimationConfig','StreamingReactionsTrayEvents','VideoPlayerLoggerSource'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('EventEmitter'));i=h&&h.prototype;function j(k,l,m,n){'use strict';i.constructor.call(this);this.$StreamingReactionsTrayConfig1=c('StreamingReactionsAnimationConfig');this.durationsMs=this.$StreamingReactionsTrayConfig1.DURATIONS_MS;this.$StreamingReactionsTrayConfig2(k,l);this.$StreamingReactionsTrayConfig3(m);this.globalScale=this.$StreamingReactionsTrayConfig1.SCALES.GLOBAL*n;this.shootUpScale=this.globalScale*this.$StreamingReactionsTrayConfig1.SCALES.SHOOT_UP;this.maxExplosionScale=this.globalScale*this.$StreamingReactionsTrayConfig1.SCALES.MAX_EXPLOSION;this.minMorphScale=this.globalScale*this.$StreamingReactionsTrayConfig1.SCALES.MIN_MORPH;this.viewUpdateInterval=this.$StreamingReactionsTrayConfig1.THROTTLE.VIEW_UPDATE_INTERVAL;this.reactionStartAnimationRate=this.$StreamingReactionsTrayConfig1.THROTTLE.REACTION_START_ANIMATION_RATE;this.reactionBufferSize=this.$StreamingReactionsTrayConfig1.THROTTLE.REACTION_BUFFER_SIZE;this.maxAnonReactionsCount=this.$StreamingReactionsTrayConfig1.THROTTLE.MAX_REACTIONS_ON_SCREEN;this.reactionSelfFireworkAnimationThreshold=this.$StreamingReactionsTrayConfig1.THROTTLE.REACTION_CLICK_SELF_FIREWORK_ANIMATION_THRESHOLD;var o=this.$StreamingReactionsTrayConfig1.CURVES;this.anonHorizontalCurve='cubic-bezier('+o.ANON_HORIZONTAL.join(', ')+')';this.friendWindHorizontalCurve='cubic-bezier('+o.FRIEND_WIND_HORIZONTAL.join(', ')+')';this.shootUpVerticalCurve='cubic-bezier('+o.SHOOT_UP_VERTICAL.join(', ')+')';this.morphScaleCurve='cubic-bezier('+o.MORPH_SCALE.join(', ')+')';this.explosionScaleCurve='cubic-bezier('+o.EXPLOSION_SCALE.join(', ')+')';this.friendWindScaleCurve='cubic-bezier('+o.FRIEND_WIND_SCALE.join(', ')+')';this.friendWindVacuumZoneScaleCurve='cubic-bezier('+o.FRIEND_WIND_VACUUM_ZONE_SCALE.join(', ')+')';}j.prototype.updateSurface=function(k,l,m){'use strict';this.$StreamingReactionsTrayConfig2(k,l);this.$StreamingReactionsTrayConfig3(m);this.emit(c('StreamingReactionsTrayEvents').UpdateSurface);};j.prototype.$StreamingReactionsTrayConfig3=function(k){'use strict';if(k===c('VideoPlayerLoggerSource').CHANNEL){this.anonWindDurationMs=this.$StreamingReactionsTrayConfig1.DURATIONS_MS.ANON_WIND_CHANNEL;this.friendWindDurationMs=this.$StreamingReactionsTrayConfig1.DURATIONS_MS.FRIEND_WIND_CHANNEL;}else if(k===c('VideoPlayerLoggerSource').SNOWLIFT){this.anonWindDurationMs=this.$StreamingReactionsTrayConfig1.DURATIONS_MS.ANON_WIND_SNOWLIFT;this.friendWindDurationMs=this.$StreamingReactionsTrayConfig1.DURATIONS_MS.FRIEND_WIND_SNOWLIFT;}else{this.anonWindDurationMs=this.$StreamingReactionsTrayConfig1.DURATIONS_MS.ANON_WIND_INLINE;this.friendWindDurationMs=this.$StreamingReactionsTrayConfig1.DURATIONS_MS.FRIEND_WIND_INLINE;}};j.prototype.$StreamingReactionsTrayConfig2=function(k,l){'use strict';var m=k,n=l;this.maxX=m+this.$StreamingReactionsTrayConfig1.OFFSETS_PX.POSITIVE_X;this.minX=0-this.$StreamingReactionsTrayConfig1.OFFSETS_PX.NEGATIVE_X;this.maxY=n+this.$StreamingReactionsTrayConfig1.OFFSETS_PX.POSITIVE_Y;this.minY=0-this.$StreamingReactionsTrayConfig1.OFFSETS_PX.NEGATIVE_Y;this.reactionsOffScreenX=m+21;};f.exports=j;},null);
__d('StreamingReaction',['cx','CSS','DOM','EventEmitter','KeyframeAnimation','Style','StreamingReactionsTrayConfig','StreamingReactionsTrayEvents','getVendorPrefixedName','queryThenMutateDOM'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('getVendorPrefixedName')('transform'),l=-30;i=babelHelpers.inherits(m,c('EventEmitter'));j=i&&i.prototype;m.getReaction=function(n,o,p){var q=arguments.length<=3||arguments[3]===undefined?'':arguments[3];'use strict';var r=n?m.friendElementQueue:m.anonElementQueue;if(r.length>0){var s=r.shift();s.removeSpecificData();s.addSpecificData(o,q);return s;}else return new m(n,o,p,q);};m.clearQueue=function(){'use strict';m.anonElementQueue.length=0;m.friendElementQueue.length=0;};function m(n,o,p){var q=arguments.length<=3||arguments[3]===undefined?'':arguments[3];'use strict';j.constructor.call(this);this.$StreamingReaction1=p;this.setState('CONSTRUCTED');this.isFriend=n;this.type=o;this.profilePicUri=q;this.start=-1;this.randVerticalStartPositionAnon=this.$StreamingReaction6();this.randShootUpHorizontalPosition=this.$StreamingReaction7();this.randShootUpMaxVerticalPosition=this.$StreamingReaction8();this.randAmp=this.$StreamingReaction9();this.randTimeOffsetMs=this.$StreamingReaction10();this.period=this.$StreamingReaction11(this.isFriend,this.randShootUpHorizontalPosition);this.anonWindDurationMs=this.$StreamingReaction1.anonWindDurationMs+this.randTimeOffsetMs;this.maxAnonWindDurationMs=this.$StreamingReaction1.anonWindDurationMs+this.$StreamingReaction1.durationsMs.ANON_WIND_MAX_OFFSET;this.shootUpDurationMs=this.$StreamingReaction1.durationsMs.SHOOT_UP;this.explosionDurationMs=this.$StreamingReaction1.durationsMs.EXPLOSION;this.explosionPauseDurationMs=this.$StreamingReaction1.durationsMs.EXPLOSION_PAUSE;this.morphShrinkDurationMs=this.$StreamingReaction1.durationsMs.MORPH/4;this.morphGrowDurationMs=this.$StreamingReaction1.durationsMs.MORPH/6;this.morphPauseDurationMs=this.$StreamingReaction1.durationsMs.MORPH_PAUSE;this.friendWindKeyDurationMs=this.$StreamingReaction1.friendWindDurationMs;c('queryThenMutateDOM')(function(){},this.createElem.bind(this));}m.prototype.createElem=function(){'use strict';this.yAxisDiv=c('DOM').create('div');this.xAxisDiv=c('DOM').create('div');this.reactionElem=c('DOM').create('div');c('DOM').appendContent(this.xAxisDiv,this.reactionElem);c('DOM').appendContent(this.yAxisDiv,this.xAxisDiv);this.root=this.yAxisDiv;c('CSS').addClass(this.yAxisDiv,"_g19");c('CSS').addClass(this.xAxisDiv,"_g19");this.setReactionImage();var n=void 0,o=void 0,p=void 0;if(this.isFriend){this.$StreamingReaction12();this.setFireworksColors();this.root=c('DOM').create('div');c('DOM').appendContent(this.root,this.fireworks);c('DOM').appendContent(this.root,this.yAxisDiv);n=this.randShootUpHorizontalPosition;o=this.$StreamingReaction1.minY+l;p=this.$StreamingReaction1.minMorphScale;var q=this.$StreamingReaction1.shootUpScale;this.createFriendImage();c('Style').set(this.friendImg,k,'scale('+q+')');}else{n=this.$StreamingReaction1.minX;o=this.randVerticalStartPositionAnon;p=this.$StreamingReaction1.globalScale;}c('Style').set(this.reactionElem,k,'scale('+p+')');c('Style').set(this.yAxisDiv,'right',n+'px');c('Style').set(this.yAxisDiv,'bottom',o+'px');this.setState('RENDERED');};m.prototype.setAnimationX=function(n){'use strict';this.$StreamingReaction3=n;};m.prototype.setAnimationY=function(n){'use strict';this.$StreamingReaction4=n;};m.prototype.setAnimationScale=function(n){'use strict';this.$StreamingReaction5=n;};m.prototype.getAnimationX=function(){'use strict';return this.$StreamingReaction3;};m.prototype.getAnimationY=function(){'use strict';return this.$StreamingReaction4;};m.prototype.getAnimationScale=function(){'use strict';return this.$StreamingReaction5;};m.prototype.createFriendImage=function(){'use strict';this.friendImg=c('DOM').create('img');c('DOM').setAttributes(this.friendImg,{src:this.profilePicUri});c('DOM').appendContent(this.xAxisDiv,this.friendImg);c('Style').set(this.friendImg,k,'scale('+this.$StreamingReaction1.shootUpScale+')');c('Style').set(this.reactionElem,'opacity','0');c('CSS').addClass(this.friendImg,"_2-ai");};m.prototype.setFriendImage=function(n){'use strict';this.profilePicUri=n;c('DOM').setAttributes(this.friendImg,{src:this.profilePicUri});};m.prototype.setReactionImage=function(){'use strict';c('CSS').addClass(this.reactionElem,"_g19");c('CSS').addClass(this.reactionElem,this.getReactionImageClass(this.type));};m.prototype.setState=function(n){'use strict';var o=this.getState();this.$StreamingReaction2=n;if(o!=='FINISHED'&&n==='FINISHED'){var p=this.isFriend?m.friendElementQueue:m.anonElementQueue;p.push(this);this.$StreamingReaction2='RENDERED';}this.emit(c('StreamingReactionsTrayEvents').ReactionStateChange,this.getState());};m.prototype.getState=function(){'use strict';return this.$StreamingReaction2;};m.prototype.addSpecificData=function(n,o){'use strict';this.type=n;this.profilePicUri=o;this.setReactionImage();if(this.isFriend){this.setFireworksColors();this.setFriendImage(o);}};m.prototype.removeSpecificData=function(){'use strict';this.removeReactionImage();if(this.isFriend)this.removeFireworksStyle();};m.prototype.removeReactionImage=function(){'use strict';c('CSS').removeClass(this.reactionElem,this.getReactionImageClass(this.type));};m.prototype.removeFireworksStyle=function(){'use strict';for(var n=0;n<this.fireworks.length;n++)c('CSS').removeClass(this.fireworks[n],this.getReactionFireworksClass(this.type,n));};m.prototype.$StreamingReaction12=function(){'use strict';var n=[];for(var o=0,p;o<10;o++){p=c('DOM').create('div');c('CSS').addClass(p,"_3na5");c('Style').set(p,'right',this.randShootUpHorizontalPosition+22+'px');c('Style').set(p,'bottom',this.randShootUpMaxVerticalPosition-15+'px');switch(o){case 1:c('CSS').addClass(p,"_3nab");break;case 2:c('CSS').addClass(p,"_3nad");break;case 3:c('CSS').addClass(p,"_3nae");break;case 4:c('CSS').addClass(p,"_3naf");break;case 5:c('CSS').addClass(p,"_3nag");break;case 6:c('CSS').addClass(p,"_3nah");break;case 7:c('CSS').addClass(p,"_3nak");break;case 8:c('CSS').addClass(p,"_3nam");break;case 9:c('CSS').addClass(p,"_3nan");break;default:break;}n.push(p);}this.fireworks=n;};m.prototype.setFireworksColors=function(){'use strict';for(var n=0;n<this.fireworks.length;n++)c('CSS').addClass(this.fireworks[n],this.getReactionFireworksClass(this.type,n));};m.prototype.getReactionImageClass=function(n){'use strict';switch(n){case 'LIKE':return "_2-am";case 'HAHA':return "_2-an";case 'WOW':return "_2-ao";case 'LOVE':return "_2-ap";case 'ANGER':return "_2-aq";case 'SORRY':return "_2-ar";case 'DOROTHY':return "_2nqh";default:throw new Error('Not a valid reaction type: '+n);}};m.prototype.getReactionFireworksClass=function(n,o){'use strict';var p=o%2===0;if(p){if(this.type==='LIKE'){return "_3na6";}else if(this.type==='LOVE'){return "_3na8";}else if(this.type==='DOROTHY'){return "_1l5u";}else return "_3na9";}else return "_3naa";};m.prototype.$StreamingReaction10=function(){'use strict';var n=this.$StreamingReaction1.durationsMs.ANON_WIND_MAX_OFFSET;return -1*n+Math.random()*n*2;};m.prototype.$StreamingReaction9=function(){'use strict';var n=Math.random()>.5;return (n?1:-1)*(Math.random()*(1-.6)+.6);};m.prototype.$StreamingReaction11=function(n,o){'use strict';var p=n?this.$StreamingReaction1.maxX-o:this.$StreamingReaction1.maxX;return p;};m.prototype.$StreamingReaction6=function(){'use strict';var n=(this.$StreamingReaction1.maxY-this.$StreamingReaction1.minY)/2;return ~~(Math.random()*n);};m.prototype.$StreamingReaction7=function(){'use strict';return Math.random()*(this.$StreamingReaction1.maxX/3);};m.prototype.$StreamingReaction8=function(){'use strict';var n=1/3,o=this.$StreamingReaction1.maxY-this.$StreamingReaction1.minY;return (Math.random()*(o*(1-n))+n*o-l);};m.anonElementQueue=[];m.friendElementQueue=[];f.exports=m;},null);
__d('StreamingReactionsTrayAnimation',['DOM','Set','StreamingReaction','StreamingReactionsTrayConfig','StreamingReactionsTrayEvents'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j){'use strict';this.root=i;this.config=j;this.animating=false;this.reactions=new (c('Set'))();}h.prototype.addReaction=function(i,j){var k,l=this,m=arguments.length<=2||arguments[2]===undefined?'':arguments[2];'use strict';if(this.animating)(function(){var n=c('StreamingReaction').getReaction(i,j,l.config,m);l.reactions.add(n);if(n.getState()==='RENDERED'){l.buildAnimation(n);}else n.once(c('StreamingReactionsTrayEvents').ReactionStateChange,function(o){if(o==='RENDERED')this.buildAnimation(n);}.bind(l));})();};h.prototype.start=function(){'use strict';this.animating=true;};h.prototype.stop=function(){'use strict';this.animating=false;c('StreamingReaction').clearQueue();for(var i=this.reactions,j=Array.isArray(i),k=0,i=j?i:i[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var l;if(j){if(k>=i.length)break;l=i[k++];}else{k=i.next();if(k.done)break;l=k.value;}var m=l;if(m.getState()!=='CONSTRUCTED')c('DOM').remove(m.root);}this.reactions.clear();};h.prototype.setOnFinishHandler=function(i){'use strict';this.onFinishHandler=i;};h.prototype.buildAnimation=function(i){'use strict';throw new Error('Function not implemented');};h.prototype.createOnFinishForReaction=function(i){'use strict';return function(j){this.onFinish(i,j);}.bind(this);};h.prototype.onFinish=function(i,j){'use strict';if(this.onFinishHandler)this.onFinishHandler();if(i.getState()!=='FINISHED')i.setState('FINISHED');};f.exports=h;},null);
__d('StreamingReactionsTrayAnonymousAnimation',['CSSAnimationBuilder','DOM','StreamingReactionsTrayAnimation','StreamingReaction','StreamingReactionsTrayConfig'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('StreamingReactionsTrayAnimation'));i=h&&h.prototype;function j(k,l){'use strict';i.constructor.call(this,k,l);}j.prototype.addAnonReaction=function(k){'use strict';i.addReaction.call(this,false,k);};j.prototype.buildAnimation=function(k){'use strict';if(!k.getAnimationY()){var l=k.anonWindDurationMs/1000,m=k.maxAnonWindDurationMs/1000,n=-1*(this.config.maxX-this.config.minX),o=k.randAmp*(this.config.maxY-this.config.minY)/2;n=Math.round(n*100)/100;o=Math.round(o*100)/100;var p=this.config.globalScale,q=c('CSSAnimationBuilder').keyframeAnimation(k.yAxisDiv),r=c('CSSAnimationBuilder').keyframeAnimation(k.xAxisDiv),s=c('CSSAnimationBuilder').keyframeAnimation(k.reactionElem);q.defineKeyframes({'0%':{transform:'translateY('+0+'px)','animation-timing-function':'ease-in-out'},'50%':{transform:'translateY('+o+'px)','animation-timing-function':'ease-in-out'},'100%':{transform:'translateY('+0+'px)'}});r.defineKeyframes({'0%':{transform:'translateX('+0+'px)'},'100%':{transform:'translateX('+n*1.2+'px)'}});s.defineKeyframes({'0%':{transform:'scale('+p+')'},'80%':{transform:'scale('+p+')'},'100%':{transform:'scale('+.1+')'}});r.setTimingFunction(this.config.anonHorizontalCurve).setDuration(l).setMemoize(false).setIterationCount(1);k.setAnimationX(r);q.setDuration(m).setIterationCount(1).setMemoize(false).setFinishedCallback(this.createOnFinishForReaction(k));k.setAnimationY(q);s.setTimingFunction('linear').setDuration(l).setMemoize(false).setIterationCount(1);k.setAnimationScale(s);if(this.animating)c('DOM').appendContent(this.root,k.root);}if(this.animating){k.setState('ANIMATING');k.getAnimationX().start();k.getAnimationY().start();k.getAnimationScale().start();}};f.exports=j;},null);
__d('StreamingReactionsTrayFriendAnimation',['Arbiter','DOM','CSSAnimationBuilder','StreamingReaction','StreamingReactionsTrayAnimation','StreamingReactionsTrayConfig','StreamingReactionsTrayEvents','queryThenMutateDOM'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();var j=10;h=babelHelpers.inherits(k,c('StreamingReactionsTrayAnimation'));i=h&&h.prototype;function k(l,m){'use strict';i.constructor.call(this,l,m);}k.prototype.addFriendReaction=function(l,m){'use strict';i.addReaction.call(this,true,l,m);};k.prototype.buildAnimation=function(l){'use strict';this.incrementFireworksCount();var m=-1*l.randShootUpMaxVerticalPosition;m=Math.round(m*100)/100;var n=l.randAmp*(this.config.maxY-this.config.minY)/2,o=-1*(this.config.maxX-this.config.minX-l.randShootUpHorizontalPosition),p=this.config.globalScale,q=[l.shootUpDurationMs,l.explosionDurationMs*.15,l.explosionDurationMs*.85,l.explosionPauseDurationMs*.8,l.explosionPauseDurationMs*.2,l.morphShrinkDurationMs,l.morphGrowDurationMs,l.morphPauseDurationMs,l.friendWindKeyDurationMs*.5,l.friendWindKeyDurationMs*.3,l.friendWindKeyDurationMs*.2].map(function(pa){return pa/1000;}),r=q.reduce(function(pa,qa){return pa+qa;}),s=q.map(function(pa,qa,ra){var sa=(qa>0?ra[qa-1]:0)+pa;q[qa]=sa;return sa;}).map(function(pa){return pa/r*100;}),t=s[0],u=s[1],v=s[2],w=s[3],x=s[4],y=s[5],z=s[6],aa=s[7],ba=s[8],ca=s[9],da=s[10],ea=c('CSSAnimationBuilder').keyframeAnimation(l.yAxisDiv);ea.defineKeyframe('0%',{transform:'translateY('+0+'px)','animation-timing-function':this.config.shootUpVerticalCurve}).defineKeyframe(t,{transform:'translateY('+m+'px)','animation-timing-function':'linear'}).defineKeyframe(aa,{transform:'translateY('+m+'px)','animation-timing-function':'ease-in-out'}).defineKeyframe(ba,{transform:'translateY('+(m+n)+'px)','animation-timing-function':'ease-in-out'}).defineKeyframe(da,{transform:'translateY('+m+'px)'});ea.setDuration(r).setFinishedCallback(this.createOnFinishForReaction(l)).setIterationCount(1);var fa=c('CSSAnimationBuilder').keyframeAnimation(l.xAxisDiv);fa.defineKeyframe('0%',{transform:'translateX('+0+'px)'}).defineKeyframe(aa,{transform:'translateX('+0+'px)'}).defineKeyframe(da,{transform:'translateX('+o+'px)'});fa.setDuration(r).setTimingFunction(this.config.anonHorizontalCurve).setIterationCount(1);var ga=c('CSSAnimationBuilder').keyframeAnimation(l.friendImg);ga.defineKeyframe('0%',{transform:'scale('+this.config.shootUpScale+')','animation-timing-function':'linear'}).defineKeyframe(t,{transform:'scale('+this.config.shootUpScale+')','animation-timing-function':this.config.explosionScaleCurve}).defineKeyframe(v,{transform:'scale('+this.config.maxExplosionScale+')','animation-timing-function':'linear'}).defineKeyframe(x,{transform:'scale('+this.config.maxExplosionScale+')',opacity:'1','animation-timing-function':'linear'}).defineKeyframe(y,{transform:'scale('+this.config.minMorphScale+')',opacity:'0'}).defineKeyframe(da,{opacity:'0'});ga.setDuration(r).setIterationCount(1);var ha=c('CSSAnimationBuilder').keyframeAnimation(l.reactionElem);ha.defineKeyframe('0%',{opacity:'0',transform:'scale('+this.config.minMorphScale+')','animation-timing-function':'linear'}).defineKeyframe(x,{opacity:'0',transform:'scale('+this.config.minMorphScale+')','animation-timing-function':'linear'}).defineKeyframe(y,{opacity:'1',transform:'scale('+this.config.minMorphScale+')','animation-timing-function':this.config.morphScaleCurve}).defineKeyframe(z,{opacity:'1',transform:'scale('+this.config.maxExplosionScale+')','animation-timing-function':'linear'}).defineKeyframe(ba,{opacity:'1',transform:'scale('+p+')','animation-timing-function':'linear'}).defineKeyframe(ca,{opacity:'1',transform:'scale('+p+')','animation-timing-function':'linear'}).defineKeyframe(da,{opacity:'1',transform:'scale('+.1+')','animation-timing-function':'linear'});ha.setDuration(r).setIterationCount(1);var ia=[];for(var ja=l.fireworks,ka=Array.isArray(ja),la=0,ja=ka?ja:ja[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ma;if(ka){if(la>=ja.length)break;ma=ja[la++];}else{la=ja.next();if(la.done)break;ma=la.value;}var na=ma,oa=c('CSSAnimationBuilder').keyframeAnimation(na);oa.defineKeyframe('0%',{'background-position':'0px -48px',opacity:'0'}).defineKeyframe(u,{'background-position':'0px 48px',opacity:'0'}).defineKeyframe(w,{'background-position':'0px -48px',opacity:'1'}).defineKeyframe('100%',{'background-position':'0px -48px',opacity:'0'});oa.setDuration(r).setIterationCount(1).setMemoize(false).setTimingFunction('cubic-bezier(0.075, 0.82, 0.165, 1)').setFinishedCallback(this.onFireworkFinish.bind(this));ia.push(oa);}if(this.animating)c('queryThenMutateDOM')(function(){},function(){c('DOM').appendContent(this.root,l.root);l.setState('ANIMATING');for(var pa=ia,qa=Array.isArray(pa),ra=0,pa=qa?pa:pa[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var sa;if(qa){if(ra>=pa.length)break;sa=pa[ra++];}else{ra=pa.next();if(ra.done)break;sa=ra.value;}var ta=sa;ta.start();}fa.start();ea.start();ga.start();ha.start();}.bind(this));};k.prototype.onFireworkFinish=function(l){'use strict';this.decrementFireworksCount();};k.prototype.incrementFireworksCount=function(){'use strict';var l=k.fireWorksCount,m=l+j;c('Arbiter').inform(c('StreamingReactionsTrayEvents').FireworksAnimating,true);k.fireWorksCount=m;};k.prototype.decrementFireworksCount=function(){'use strict';var l=k.fireWorksCount-1;if(l<1)c('Arbiter').inform(c('StreamingReactionsTrayEvents').FireworksAnimating,false);k.fireWorksCount=l;};k.fireWorksCount=0;f.exports=k;},null);
__d('StreamingReactionsTrayDiffuser',['StreamingReactionsTrayAnonymousAnimation','StreamingReactionsTrayConfig','StreamingReactionsTrayFriendAnimation','randomShuffle'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();'use strict';function h(i,j,k){'use strict';this.$StreamingReactionsTrayDiffuser1=i;this.$StreamingReactionsTrayDiffuser4=j;this.$StreamingReactionsTrayDiffuser11=k;this.$StreamingReactionsTrayDiffuser10=this.$StreamingReactionsTrayDiffuser11.viewUpdateInterval;this.$StreamingReactionsTrayDiffuser7={};this.$StreamingReactionsTrayDiffuser6={};this.$StreamingReactionsTrayDiffuser2=[];this.$StreamingReactionsTrayDiffuser9=0;this.$StreamingReactionsTrayDiffuser5=this.$StreamingReactionsTrayDiffuser11.maxAnonReactionsCount;this.$StreamingReactionsTrayDiffuser3=this.$StreamingReactionsTrayDiffuser11.reactionBufferSize;this.$StreamingReactionsTrayDiffuser1.setOnFinishHandler(this.$StreamingReactionsTrayDiffuser12.bind(this));}h.prototype.startAnimation=function(){'use strict';clearInterval(this.$StreamingReactionsTrayDiffuser8);this.$StreamingReactionsTrayDiffuser1.start();this.$StreamingReactionsTrayDiffuser4.start();this.$StreamingReactionsTrayDiffuser8=setInterval(this.$StreamingReactionsTrayDiffuser13.bind(this),this.$StreamingReactionsTrayDiffuser10);};h.prototype.stopAnimation=function(){'use strict';this.$StreamingReactionsTrayDiffuser1.stop();this.$StreamingReactionsTrayDiffuser4.stop();this.$StreamingReactionsTrayDiffuser9=0;clearInterval(this.$StreamingReactionsTrayDiffuser8);};h.prototype.addOwnReaction=function(i,j,k){'use strict';if(k)this.$StreamingReactionsTrayDiffuser6[i]+=1;this.$StreamingReactionsTrayDiffuser14(i,j);};h.prototype.processPayload=function(i){'use strict';var j=i.feedback_add_streaming_reaction_subscribe,k=j.feedback,l=j.reactor,m=j.reaction_info.reaction_type,n=l.is_viewer_friend;if(n)this.$StreamingReactionsTrayDiffuser14(m,l.profile_picture.uri);var o={},p=0,q=k.reactions_stream;for(var r=q,s=Array.isArray(r),t=0,r=s?r:r[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var u;if(s){if(t>=r.length)break;u=r[t++];}else{t=r.next();if(t.done)break;u=t.value;}var v=u,w=v.reaction_info.reaction_type,x=v.count;if(n&&m)x--;if(this.$StreamingReactionsTrayDiffuser7[w]){var y=this.$StreamingReactionsTrayDiffuser7[w];if(this.$StreamingReactionsTrayDiffuser6[w])y+=this.$StreamingReactionsTrayDiffuser6[w];var z=y?Math.max(x-y,0):0;o[w]=z;p+=z;}this.$StreamingReactionsTrayDiffuser7[w]=x;}this.$StreamingReactionsTrayDiffuser15(o,p);};h.prototype.$StreamingReactionsTrayDiffuser15=function(i,j){var k;'use strict';var l=[],m=this.$StreamingReactionsTrayDiffuser3-this.$StreamingReactionsTrayDiffuser2.length;if(m>0){var n=j>m,o=function(){if(q){if(r>=p.length)return 'break';s=p[r++];}else{r=p.next();if(r.done)return 'break';s=r.value;}var t=s,u=t[0],v=t[1];v=n?Math.floor(v/j*m):v;l=l.concat(Array.apply(undefined,Array(v)).map(function(){return u;}));};for(var p=Object.entries(i),q=Array.isArray(p),r=0,p=q?p:p[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var s,k=o();if(k==='break')break;}c('randomShuffle')(l);this.$StreamingReactionsTrayDiffuser2=this.$StreamingReactionsTrayDiffuser2.concat(l);}};h.prototype.$StreamingReactionsTrayDiffuser14=function(i,j){'use strict';this.$StreamingReactionsTrayDiffuser4.addFriendReaction(i,j);};h.prototype.$StreamingReactionsTrayDiffuser13=function(){'use strict';if(this.$StreamingReactionsTrayDiffuser2.length>0&&this.$StreamingReactionsTrayDiffuser9<this.$StreamingReactionsTrayDiffuser5){this.$StreamingReactionsTrayDiffuser1.addAnonReaction(this.$StreamingReactionsTrayDiffuser2.shift());this.$StreamingReactionsTrayDiffuser9++;}};h.prototype.$StreamingReactionsTrayDiffuser12=function(){'use strict';this.$StreamingReactionsTrayDiffuser9--;};f.exports=h;},null);
__d('StreamingReactionsTray',['Arbiter','FeedbackAddStreamingReactionSubscription','FeedbackReactionType','HotLiveVideoPayloadManager','Run','StreamingReactionsTrayAnonymousAnimation','StreamingReactionsTrayConfig','StreamingReactionsTrayDiffuser','StreamingReactionsTrayEvents','StreamingReactionsTrayFriendAnimation','Style','SubscriptionsHandler','UFIUIEvents','VideoPlayerLoggerSource','Visibility'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j,k,l,m,n,o,p,q,r){'use strict';this.$StreamingReactionsTray6=i;this.$StreamingReactionsTray4=k;this.$StreamingReactionsTray19=0;this.$StreamingReactionsTray18=p;this.$StreamingReactionsTray16=q;this.$StreamingReactionsTray17=r;this.$StreamingReactionsTray20(k);this.$StreamingReactionsTray1=new (c('StreamingReactionsTrayDiffuser'))(new (c('StreamingReactionsTrayAnonymousAnimation'))(this.$StreamingReactionsTray6,this.$StreamingReactionsTray2),new (c('StreamingReactionsTrayFriendAnimation'))(this.$StreamingReactionsTray6,this.$StreamingReactionsTray2),this.$StreamingReactionsTray2);this.$StreamingReactionsTray15=new (c('SubscriptionsHandler'))();this.$StreamingReactionsTray9=j;this.$StreamingReactionsTray7=false;this.$StreamingReactionsTray8=false;this.$StreamingReactionsTray5=o;this.$StreamingReactionsTray10=l;this.$StreamingReactionsTray11=m;this.$StreamingReactionsTray12=n;this.$StreamingReactionsTray21();c('Run').onLeave(this.$StreamingReactionsTray22.bind(this));}h.prototype.$StreamingReactionsTray20=function(i){'use strict';var j=parseInt(c('Style').get(this.$StreamingReactionsTray6,'width'),10),k=parseInt(c('Style').get(this.$StreamingReactionsTray6,'height'),10);this.$StreamingReactionsTray3=i;if(this.$StreamingReactionsTray2){this.$StreamingReactionsTray2.updateSurface(j,k,this.$StreamingReactionsTray3);}else this.$StreamingReactionsTray2=new (c('StreamingReactionsTrayConfig'))(j,k,this.$StreamingReactionsTray3,this.$StreamingReactionsTray18);};h.prototype.$StreamingReactionsTray21=function(){'use strict';this.$StreamingReactionsTray15.addSubscriptions(this.$StreamingReactionsTray9.addListener('unmute',function(){if(this.$StreamingReactionsTray23())this.$StreamingReactionsTray24();}.bind(this)),this.$StreamingReactionsTray9.addListener('mute',function(){if(this.$StreamingReactionsTray25())this.$StreamingReactionsTray26();}.bind(this)),this.$StreamingReactionsTray9.addListener('volume',function(){if(this.$StreamingReactionsTray23())this.$StreamingReactionsTray24();}.bind(this)),this.$StreamingReactionsTray9.addListener('VideoChannelController/enterChannel',function(){this.$StreamingReactionsTray20(c('VideoPlayerLoggerSource').CHANNEL);this.$StreamingReactionsTray26();}.bind(this)),this.$StreamingReactionsTray9.addListener('VideoChannelController/exitChannel',function(){this.$StreamingReactionsTray20(this.$StreamingReactionsTray4);if(this.$StreamingReactionsTray23())this.$StreamingReactionsTray24();}.bind(this)),c('Arbiter').subscribe('VideoChannelView/opened',function(){this.$StreamingReactionsTray20(c('VideoPlayerLoggerSource').CHANNEL);this.$StreamingReactionsTray26();}.bind(this)),c('Arbiter').subscribe(c('StreamingReactionsTrayEvents').ResizeChannelViewWindow,function(){return this.$StreamingReactionsTray20(this.$StreamingReactionsTray3);}.bind(this)),c('Arbiter').subscribe('VideoChannelView/closed',function(){this.$StreamingReactionsTray20(this.$StreamingReactionsTray4);if(this.$StreamingReactionsTray23())this.$StreamingReactionsTray24();}.bind(this)),this.$StreamingReactionsTray2.addListener(c('StreamingReactionsTrayEvents').UpdateSurface,function(){if(this.$StreamingReactionsTray7){this.$StreamingReactionsTray26();if(this.$StreamingReactionsTray23())this.$StreamingReactionsTray24();}}.bind(this)),this.$StreamingReactionsTray9.addListener('beginPlayback',function(){if(this.$StreamingReactionsTray23())setTimeout(function(){this.$StreamingReactionsTray20(this.$StreamingReactionsTray3);this.$StreamingReactionsTray24();}.bind(this),100);}.bind(this)),this.$StreamingReactionsTray9.addListener('finishPlayback',function(){this.$StreamingReactionsTray26();}.bind(this)),c('Arbiter').subscribe(c('UFIUIEvents').ReactionButtonClicked,function(i,j){this.$StreamingReactionsTray27(j,true);}.bind(this)),c('Arbiter').subscribe(c('StreamingReactionsTrayEvents').AddReactionAnimate,function(i,j){this.$StreamingReactionsTray27(j,false);}.bind(this)),c('Visibility').addListener(c('Visibility').HIDDEN,function(){this.$StreamingReactionsTray26();}.bind(this)),c('Visibility').addListener(c('Visibility').VISIBLE,function(){if(this.$StreamingReactionsTray23())this.$StreamingReactionsTray24();}.bind(this)));};h.prototype.$StreamingReactionsTray22=function(){'use strict';this.$StreamingReactionsTray26();this.$StreamingReactionsTray15.release();};h.prototype.$StreamingReactionsTray28=function(){'use strict';this.$StreamingReactionsTray13=c('FeedbackAddStreamingReactionSubscription').subscribe(this.$StreamingReactionsTray10,this.$StreamingReactionsTray29.bind(this));if(this.$StreamingReactionsTray12)this.$StreamingReactionsTray14=c('HotLiveVideoPayloadManager').subscribe(this.$StreamingReactionsTray11,'streaming_reactions',function(i){var j=[];for(var k in c('FeedbackReactionType'))if(c('FeedbackReactionType')[k] in i)j.push({count:i[c('FeedbackReactionType')[k]],reaction_info:{reaction_type:k}});var l={feedback_add_streaming_reaction_subscribe:{feedback:{reactions_stream:j},reactor:{is_viewer_friend:false}}};this.$StreamingReactionsTray29(l);}.bind(this));this.$StreamingReactionsTray8=true;};h.prototype.$StreamingReactionsTray30=function(){'use strict';this.$StreamingReactionsTray13&&this.$StreamingReactionsTray13.unsubscribe();this.$StreamingReactionsTray14&&c('HotLiveVideoPayloadManager').unsubscribe(this.$StreamingReactionsTray14);this.$StreamingReactionsTray8=false;};h.prototype.$StreamingReactionsTray27=function(i,j){'use strict';var k=Date.now(),l=k-this.$StreamingReactionsTray19;if(l<this.$StreamingReactionsTray2.reactionSelfFireworkAnimationThreshold)return;this.$StreamingReactionsTray19=k;var m=void 0;switch(i.reaction_type){case c('FeedbackReactionType').NONE:return;case c('FeedbackReactionType').LIKE:m='LIKE';break;case c('FeedbackReactionType').LOVE:m='LOVE';break;case c('FeedbackReactionType').WOW:m='WOW';break;case c('FeedbackReactionType').HAHA:m='HAHA';break;case c('FeedbackReactionType').SORRY:m='SORRY';break;case c('FeedbackReactionType').ANGER:m='ANGER';break;case c('FeedbackReactionType').DOROTHY:m='DOROTHY';break;default:throw new Error('Not a valid reaction type: '+i.reaction_type);}this.$StreamingReactionsTray1.addOwnReaction(m,this.$StreamingReactionsTray5,j);};h.prototype.$StreamingReactionsTray29=function(i){'use strict';if(this.$StreamingReactionsTray7&&this.$StreamingReactionsTray16)this.$StreamingReactionsTray1.processPayload(i);};h.prototype.$StreamingReactionsTray26=function(){'use strict';this.$StreamingReactionsTray7=false;if(this.$StreamingReactionsTray8)this.$StreamingReactionsTray30();this.$StreamingReactionsTray1.stopAnimation();};h.prototype.$StreamingReactionsTray24=function(){'use strict';this.$StreamingReactionsTray7=true;if(!this.$StreamingReactionsTray8)this.$StreamingReactionsTray28();if(this.$StreamingReactionsTray17)this.$StreamingReactionsTray1.startAnimation();};h.prototype.$StreamingReactionsTray31=function(){'use strict';return !(this.$StreamingReactionsTray3===c('VideoPlayerLoggerSource').CHANNEL||this.$StreamingReactionsTray3===c('VideoPlayerLoggerSource').SNOWLIFT||this.$StreamingReactionsTray3===c('VideoPlayerLoggerSource').PERMALINK);};h.prototype.$StreamingReactionsTray23=function(){'use strict';return this.$StreamingReactionsTray31()?this.$StreamingReactionsTray32():this.$StreamingReactionsTray33();};h.prototype.$StreamingReactionsTray25=function(){'use strict';return this.$StreamingReactionsTray31();};h.prototype.$StreamingReactionsTray33=function(){'use strict';return !this.$StreamingReactionsTray9.isState('finished');};h.prototype.$StreamingReactionsTray32=function(){'use strict';return !this.$StreamingReactionsTray9.isMuted()&&this.$StreamingReactionsTray9.isState('playing')&&this.$StreamingReactionsTray3!==c('VideoPlayerLoggerSource').LIVE_MAP&&this.$StreamingReactionsTray3!==c('VideoPlayerLoggerSource').LIVE_MAP_INLINE;};f.exports=h;},null);